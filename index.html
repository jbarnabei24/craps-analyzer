<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Crapless Craps Analyzer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html {
            touch-action: manipulation;
            -webkit-touch-callout: none;
        }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0a1f1a 0%, #051410 100%);
            color: #fff;
            padding: 12px;
            min-height: 100vh;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }
        @media (min-width: 768px) {
            body { padding: 20px; }
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(251, 191, 36, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            position: relative;
            z-index: 1;
        }
        h1 { 
            text-align: center; 
            font-size: 24px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #10b981 0%, #fbbf24 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
            letter-spacing: 0.5px;
            line-height: 1.3;
        }
        @media (min-width: 768px) {
            h1 { font-size: 36px; margin-bottom: 10px; letter-spacing: 1px; }
        }
        .subtitle { 
            text-align: center; 
            color: #86efac; 
            margin-bottom: 20px;
            font-size: 11px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }
        @media (min-width: 768px) {
            .subtitle { margin-bottom: 30px; font-size: 16px; letter-spacing: 2px; }
        }
        
        /* HERO MARKETING SECTION */
        .hero-marketing {
            background: linear-gradient(135deg, rgba(217, 119, 6, 0.25) 0%, rgba(127, 29, 29, 0.3) 100%);
            border: 3px solid #fbbf24;
            border-radius: 16px;
            padding: 24px 20px;
            margin-bottom: 24px;
            box-shadow: 0 12px 48px rgba(251, 191, 36, 0.4), 0 0 60px rgba(239, 68, 68, 0.2) inset;
            position: relative;
            overflow: hidden;
            animation: heroGlow 3s ease-in-out infinite;
        }
        @media (min-width: 768px) {
            .hero-marketing {
                padding: 32px 40px;
                border-radius: 20px;
                margin-bottom: 32px;
            }
        }
        
        .hero-marketing::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(251, 191, 36, 0.1) 0%, transparent 70%);
            animation: heroRotate 8s linear infinite;
            pointer-events: none;
        }
        
        @keyframes heroGlow {
            0%, 100% { box-shadow: 0 12px 48px rgba(251, 191, 36, 0.4), 0 0 60px rgba(239, 68, 68, 0.2) inset; }
            50% { box-shadow: 0 12px 48px rgba(251, 191, 36, 0.6), 0 0 80px rgba(239, 68, 68, 0.3) inset; }
        }
        
        @keyframes heroRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .hero-visual {
            text-align: center;
            font-size: 56px;
            margin-bottom: 16px;
            animation: heroBounce 2s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        @media (min-width: 768px) {
            .hero-visual { font-size: 72px; margin-bottom: 20px; }
        }
        
        @keyframes heroBounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .hero-headline {
            font-size: 22px;
            font-weight: 900;
            text-align: center;
            background: linear-gradient(135deg, #fde68a 0%, #fbbf24 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
            letter-spacing: 0.5px;
            line-height: 1.3;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
        }
        @media (min-width: 768px) {
            .hero-headline { font-size: 32px; margin-bottom: 20px; letter-spacing: 1px; }
        }
        
        .hero-hook {
            font-size: 14px;
            line-height: 1.7;
            color: #d1fae5;
            text-align: center;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        @media (min-width: 768px) {
            .hero-hook { font-size: 17px; line-height: 1.8; margin-bottom: 28px; }
        }
        
        .hero-hook strong {
            color: #fbbf24;
            font-weight: 700;
        }
        
        .hero-value {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        @media (min-width: 600px) {
            .hero-value { grid-template-columns: repeat(3, 1fr); gap: 16px; }
        }
        
        .hero-stat {
            background: rgba(6, 78, 59, 0.6);
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }
        @media (min-width: 768px) {
            .hero-stat {
                padding: 20px;
                flex-direction: column;
                text-align: center;
            }
        }
        
        .hero-stat:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
            border-color: #34d399;
        }
        
        .hero-stat-icon {
            font-size: 32px;
            flex-shrink: 0;
        }
        @media (min-width: 768px) {
            .hero-stat-icon { font-size: 40px; margin-bottom: 8px; }
        }
        
        .hero-stat-text {
            font-size: 12px;
            line-height: 1.5;
            color: #d1fae5;
        }
        @media (min-width: 768px) {
            .hero-stat-text { font-size: 14px; }
        }
        
        .hero-stat-text strong {
            color: #86efac;
            font-size: 14px;
            display: block;
            margin-bottom: 4px;
        }
        @media (min-width: 768px) {
            .hero-stat-text strong { font-size: 16px; }
        }
        
        .hero-truth {
            background: linear-gradient(135deg, rgba(153, 27, 27, 0.5) 0%, rgba(127, 29, 29, 0.6) 100%);
            border: 2px solid #ef4444;
            border-radius: 10px;
            padding: 16px 18px;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.7;
            color: #fca5a5;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        @media (min-width: 768px) {
            .hero-truth { padding: 20px 24px; font-size: 16px; margin-bottom: 24px; }
        }
        
        .hero-truth strong {
            color: #fde68a;
            font-weight: 700;
        }
        
        .hero-highlight {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
            font-size: 16px;
        }
        @media (min-width: 768px) {
            .hero-highlight { font-size: 18px; }
        }
        
        .hero-cta-featured {
            background: linear-gradient(135deg, rgba(153, 27, 27, 0.6) 0%, rgba(127, 29, 29, 0.7) 100%);
            border: 3px solid #ef4444;
            border-radius: 12px;
            padding: 20px 24px;
            font-size: 15px;
            line-height: 1.8;
            color: #fde68a;
            text-align: center;
            position: relative;
            z-index: 1;
            box-shadow: 0 8px 32px rgba(239, 68, 68, 0.5), 0 0 40px rgba(239, 68, 68, 0.3) inset;
            animation: ctaPulse 2s ease-in-out infinite;
        }
        @media (min-width: 768px) {
            .hero-cta-featured { 
                padding: 24px 32px; 
                font-size: 18px;
                border-width: 4px;
            }
        }
        
        @keyframes ctaPulse {
            0%, 100% { 
                border-color: #ef4444;
                box-shadow: 0 8px 32px rgba(239, 68, 68, 0.5), 0 0 40px rgba(239, 68, 68, 0.3) inset;
            }
            50% { 
                border-color: #fca5a5;
                box-shadow: 0 12px 48px rgba(239, 68, 68, 0.7), 0 0 60px rgba(239, 68, 68, 0.5) inset;
            }
        }
        
        .hero-cta-featured strong {
            color: #fbbf24;
            font-size: 18px;
            display: block;
            margin-top: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 8px rgba(251, 191, 36, 0.6);
        }
        @media (min-width: 768px) {
            .hero-cta-featured strong { 
                font-size: 22px; 
                margin-top: 12px; 
            }
        }

        /* Info Buttons Section */
        .info-buttons-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        @media (min-width: 600px) {
            .info-buttons-container {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
            }
        }

        .info-button {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(37, 99, 235, 0.4) 100%);
            border: 2px solid #3b82f6;
            border-radius: 10px;
            padding: 14px 18px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 14px;
            font-weight: bold;
            color: #93c5fd;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }
        @media (min-width: 768px) {
            .info-button {
                font-size: 16px;
                padding: 16px 20px;
            }
        }

        .info-button:active {
            transform: scale(0.98);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.4) 0%, rgba(29, 78, 216, 0.5) 100%);
        }
        @media (hover: hover) {
            .info-button:hover {
                background: linear-gradient(135deg, rgba(37, 99, 235, 0.4) 0%, rgba(29, 78, 216, 0.5) 100%);
                border-color: #60a5fa;
                box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
                transform: translateY(-2px);
            }
        }

        .info-button.active {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(5, 150, 105, 0.4) 100%);
            border-color: #10b981;
            color: #86efac;
        }

        .info-button-icon {
            font-size: 20px;
        }
        @media (min-width: 768px) {
            .info-button-icon {
                font-size: 24px;
            }
        }

        .info-button-arrow {
            margin-left: auto;
            transition: transform 0.3s;
            font-size: 12px;
        }

        .info-button.active .info-button-arrow {
            transform: rotate(180deg);
        }

        .info-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            background: linear-gradient(135deg, rgba(6, 78, 59, 0.4) 0%, rgba(4, 47, 36, 0.6) 100%);
            border: 2px solid #10b981;
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        @media (min-width: 768px) {
            .info-content {
                border-radius: 16px;
                margin-bottom: 24px;
            }
        }

        .info-content.show {
            max-height: 3000px;
            transition: max-height 0.6s ease-in;
        }

        .info-content-inner {
            padding: 16px;
        }
        @media (min-width: 768px) {
            .info-content-inner {
                padding: 24px;
            }
        }

        .info-content h2 {
            font-size: 18px;
            color: #fde68a;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        @media (min-width: 768px) {
            .info-content h2 {
                font-size: 22px;
                margin-bottom: 20px;
                letter-spacing: 1px;
            }
        }

        .info-content h3 {
            font-size: 15px;
            color: #86efac;
            margin-top: 20px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        @media (min-width: 768px) {
            .info-content h3 {
                font-size: 17px;
                margin-top: 25px;
                margin-bottom: 12px;
            }
        }

        .info-content p {
            font-size: 13px;
            line-height: 1.7;
            color: #d1fae5;
            margin-bottom: 12px;
        }
        @media (min-width: 768px) {
            .info-content p {
                font-size: 14px;
                line-height: 1.8;
                margin-bottom: 15px;
            }
        }

        .info-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .info-content li {
            font-size: 13px;
            line-height: 1.6;
            color: #d1fae5;
            margin-bottom: 8px;
        }
        @media (min-width: 768px) {
            .info-content li {
                font-size: 14px;
                line-height: 1.7;
                margin-bottom: 10px;
            }
        }

        .info-content strong {
            color: #fbbf24;
        }

        .info-highlight {
            background: rgba(251, 191, 36, 0.15);
            border-left: 3px solid #fbbf24;
            padding: 10px 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 13px;
        }
        @media (min-width: 768px) {
            .info-highlight {
                padding: 12px 15px;
                font-size: 14px;
            }
        }

        .info-step {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
            padding: 10px 12px;
            margin: 12px 0;
            border-radius: 4px;
        }
        @media (min-width: 768px) {
            .info-step {
                padding: 12px 15px;
                margin: 15px 0;
            }
        }

        .info-step-title {
            font-weight: bold;
            color: #93c5fd;
            margin-bottom: 5px;
            font-size: 14px;
        }
        @media (min-width: 768px) {
            .info-step-title {
                font-size: 15px;
            }
        }
        
        .dice-icon {
            display: inline-block;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 6px;
            position: relative;
            margin: 0 6px;
            animation: rollDice 3s infinite ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            vertical-align: middle;
        }
        @media (min-width: 768px) {
            .dice-icon { width: 40px; height: 40px; border-radius: 8px; margin: 0 10px; }
        }
        .dice-icon .dot {
            position: absolute;
            width: 5px;
            height: 5px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            display: none;
        }
        @media (min-width: 768px) {
            .dice-icon .dot { width: 8px; height: 8px; }
        }
        
        .dice-face-1 .dot:nth-child(1) { display: block; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .dice-face-2 .dot:nth-child(1) { display: block; top: 8px; left: 8px; }
        .dice-face-2 .dot:nth-child(2) { display: block; bottom: 8px; right: 8px; }
        .dice-face-3 .dot:nth-child(1) { display: block; top: 8px; left: 8px; }
        .dice-face-3 .dot:nth-child(2) { display: block; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .dice-face-3 .dot:nth-child(3) { display: block; bottom: 8px; right: 8px; }
        .dice-face-4 .dot:nth-child(1) { display: block; top: 8px; left: 8px; }
        .dice-face-4 .dot:nth-child(2) { display: block; top: 8px; right: 8px; }
        .dice-face-4 .dot:nth-child(3) { display: block; bottom: 8px; left: 8px; }
        .dice-face-4 .dot:nth-child(4) { display: block; bottom: 8px; right: 8px; }
        .dice-face-5 .dot:nth-child(1) { display: block; top: 8px; left: 8px; }
        .dice-face-5 .dot:nth-child(2) { display: block; top: 8px; right: 8px; }
        .dice-face-5 .dot:nth-child(3) { display: block; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .dice-face-5 .dot:nth-child(4) { display: block; bottom: 8px; left: 8px; }
        .dice-face-5 .dot:nth-child(5) { display: block; bottom: 8px; right: 8px; }
        .dice-face-6 .dot:nth-child(1) { display: block; top: 8px; left: 8px; }
        .dice-face-6 .dot:nth-child(2) { display: block; top: 50%; left: 8px; transform: translateY(-50%); }
        .dice-face-6 .dot:nth-child(3) { display: block; bottom: 8px; left: 8px; }
        .dice-face-6 .dot:nth-child(4) { display: block; top: 8px; right: 8px; }
        .dice-face-6 .dot:nth-child(5) { display: block; top: 50%; right: 8px; transform: translateY(-50%); }
        .dice-face-6 .dot:nth-child(6) { display: block; bottom: 8px; right: 8px; }
        
        .dice-small {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 4px;
            position: relative;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            margin-right: 8px;
            vertical-align: middle;
        }
        @media (min-width: 768px) {
            .dice-small { width: 24px; height: 24px; }
        }
        .dice-small .dot {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #000;
            border-radius: 50%;
        }
        @media (min-width: 768px) {
            .dice-small .dot { width: 4px; height: 4px; }
        }
        
        .dice-1 .dot:nth-child(1) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .dice-2 .dot:nth-child(1) { top: 4px; left: 4px; }
        .dice-2 .dot:nth-child(2) { bottom: 4px; right: 4px; }
        .dice-3 .dot:nth-child(1) { top: 4px; left: 4px; }
        .dice-3 .dot:nth-child(2) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .dice-3 .dot:nth-child(3) { bottom: 4px; right: 4px; }
        .dice-4 .dot:nth-child(1) { top: 4px; left: 4px; }
        .dice-4 .dot:nth-child(2) { top: 4px; right: 4px; }
        .dice-4 .dot:nth-child(3) { bottom: 4px; left: 4px; }
        .dice-4 .dot:nth-child(4) { bottom: 4px; right: 4px; }
        .dice-5 .dot:nth-child(1) { top: 4px; left: 4px; }
        .dice-5 .dot:nth-child(2) { top: 4px; right: 4px; }
        .dice-5 .dot:nth-child(3) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .dice-5 .dot:nth-child(4) { bottom: 4px; left: 4px; }
        .dice-5 .dot:nth-child(5) { bottom: 4px; right: 4px; }
        .dice-6 .dot:nth-child(1) { top: 4px; left: 4px; }
        .dice-6 .dot:nth-child(2) { top: 50%; left: 4px; transform: translateY(-50%); }
        .dice-6 .dot:nth-child(3) { bottom: 4px; left: 4px; }
        .dice-6 .dot:nth-child(4) { top: 4px; right: 4px; }
        .dice-6 .dot:nth-child(5) { top: 50%; right: 4px; transform: translateY(-50%); }
        .dice-6 .dot:nth-child(6) { bottom: 4px; right: 4px; }
        
        @keyframes rollDice {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }
        
        .card { 
            background: linear-gradient(135deg, rgba(6, 78, 59, 0.4) 0%, rgba(4, 47, 36, 0.6) 100%);
            border: 2px solid #10b981; 
            border-radius: 12px; 
            padding: 16px; 
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(16, 185, 129, 0.1) inset;
            transition: transform 0.2s, box-shadow 0.2s;
            backdrop-filter: blur(10px);
        }
        @media (min-width: 768px) {
            .card { border-radius: 16px; padding: 24px; margin-bottom: 24px; }
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5), 0 0 20px rgba(16, 185, 129, 0.2);
        }
        @media (hover: none) {
            .card:hover { transform: none; }
        }
        
        .instruction-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(6, 78, 59, 0.3) 100%);
            border: 2px solid #34d399;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.2);
        }
        
        .card-header { 
            font-size: 16px; 
            font-weight: bold; 
            margin-bottom: 12px; 
            color: #86efac;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        @media (min-width: 768px) {
            .card-header { font-size: 20px; margin-bottom: 15px; gap: 10px; }
        }
        
        .section-instruction {
            font-size: 12px;
            color: #86efac;
            margin-bottom: 12px;
            line-height: 1.5;
            padding: 10px 12px;
            background: rgba(16, 185, 129, 0.08);
            border-left: 3px solid #10b981;
            border-radius: 4px;
        }
        @media (min-width: 768px) {
            .section-instruction { font-size: 13px; margin-bottom: 15px; line-height: 1.6; padding: 10px 15px; }
        }
        
        .input-group { margin-bottom: 12px; }
        @media (min-width: 768px) {
            .input-group { margin-bottom: 15px; }
        }
        
        .input-group label { 
            display: block; 
            font-size: 13px; 
            font-weight: 600; 
            margin-bottom: 5px;
            color: #d1fae5;
        }
        @media (min-width: 768px) {
            .input-group label { font-size: 14px; }
        }
        
        input, select { 
            width: 100%; 
            padding: 12px; 
            background: rgba(6, 78, 59, 0.6);
            border: 2px solid #10b981; 
            border-radius: 8px; 
            color: #fff; 
            font-size: 16px;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #34d399;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }
        
        button { 
            width: 100%; 
            padding: 14px; 
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #000; 
            border: none; 
            border-radius: 8px; 
            font-weight: bold; 
            font-size: 15px; 
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
            -webkit-tap-highlight-color: rgba(251, 191, 36, 0.3);
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
            position: relative;
        }
        @media (min-width: 768px) {
            button { padding: 16px; font-size: 18px; letter-spacing: 1px; }
        }
        
        button:active {
            transform: scale(0.95);
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);
        }
        @media (hover: hover) {
            button:hover { 
                background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(251, 191, 36, 0.4);
            }
        }
        
        button:disabled { 
            background: #6b7280; 
            cursor: not-allowed;
            transform: none;
        }
        
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        @media (min-width: 480px) { .grid { grid-template-columns: repeat(5, 1fr); } }
        @media (min-width: 768px) { .grid { grid-template-columns: repeat(10, 1fr); gap: 12px; } }
        
        .bet-box { 
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.6) 0%, rgba(17, 24, 39, 0.8) 100%);
            border: 2px solid #3b82f6;
            border-radius: 8px; 
            padding: 10px 8px; 
            text-align: center;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            min-height: 90px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        @media (min-width: 768px) {
            .bet-box { border-radius: 10px; padding: 12px; min-height: auto; }
        }
        
        .bet-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .bet-box:hover::before {
            opacity: 1;
        }
        .bet-box:hover {
            transform: scale(1.05);
            border-color: #60a5fa;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        @media (hover: none) {
            .bet-box:hover { transform: none; }
        }
        
        .bet-number { 
            font-size: 18px; 
            font-weight: bold; 
            color: #93c5fd;
            text-shadow: 0 0 10px rgba(147, 197, 253, 0.5);
        }
        @media (min-width: 768px) {
            .bet-number { font-size: 22px; }
        }
        
        .bet-amount { font-size: 15px; font-weight: bold; margin: 4px 0; color: #fff; }
        @media (min-width: 768px) {
            .bet-amount { font-size: 18px; margin: 5px 0; }
        }
        
        .bet-type { font-size: 10px; color: #93c5fd; text-transform: uppercase; }
        @media (min-width: 768px) {
            .bet-type { font-size: 11px; }
        }
        
        .bet-profit { font-size: 13px; font-weight: bold; color: #86efac; }
        @media (min-width: 768px) {
            .bet-profit { font-size: 15px; }
        }
        
        .optimal-card { 
            background: linear-gradient(135deg, rgba(217, 119, 6, 0.3) 0%, rgba(180, 83, 9, 0.4) 100%);
            border: 2px solid #fbbf24; 
            border-radius: 12px; 
            padding: 16px; 
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(251, 191, 36, 0.3);
        }
        @media (min-width: 768px) {
            .optimal-card { border-radius: 16px; padding: 24px; margin-bottom: 24px; }
        }
        
        .optimal-header { 
            font-size: 18px; 
            font-weight: bold; 
            color: #fde68a; 
            margin-bottom: 12px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            line-height: 1.3;
        }
        @media (min-width: 768px) {
            .optimal-header { font-size: 24px; margin-bottom: 15px; letter-spacing: 2px; }
        }
        
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        @media (min-width: 768px) { .stats-grid { grid-template-columns: repeat(4, 1fr); gap: 15px; } }
        
        .stat-box { 
            text-align: center;
            padding: 12px 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(253, 230, 138, 0.3);
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        @media (min-width: 768px) {
            .stat-box { padding: 15px; border-radius: 10px; }
        }
        
        .stat-label { font-size: 11px; color: #fde68a; margin-bottom: 6px; text-transform: uppercase; }
        @media (min-width: 768px) {
            .stat-label { font-size: 13px; margin-bottom: 8px; }
        }
        
        .stat-value { 
            font-size: 22px; 
            font-weight: bold;
            background: linear-gradient(135deg, #fde68a 0%, #fbbf24 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        @media (min-width: 768px) {
            .stat-value { font-size: 28px; }
        }
        
        .purple-card { 
            background: linear-gradient(135deg, rgba(88, 28, 135, 0.4) 0%, rgba(59, 7, 100, 0.5) 100%);
            border: 2px solid #a855f7; 
        }
        .purple-header { color: #e9d5ff; }
        
        /* MODE TOGGLE STYLES */
        .mode-toggle-container {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.3) 100%);
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }
        @media (min-width: 768px) {
            .mode-toggle-container {
                padding: 20px;
                border-radius: 16px;
            }
        }
        .mode-toggle-label {
            font-size: 14px;
            color: #fde68a;
            margin-bottom: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
        }
        @media (min-width: 768px) {
            .mode-toggle-label { font-size: 16px; }
        }
        .mode-toggle-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .mode-btn {
            padding: 12px;
            border: 2px solid #10b981;
            background: rgba(6, 78, 59, 0.4);
            color: #86efac;
            border-radius: 8px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        @media (min-width: 768px) {
            .mode-btn { padding: 14px; font-size: 14px; }
        }
        .mode-btn:hover {
            background: rgba(6, 78, 59, 0.6);
            transform: scale(1.02);
        }
        .mode-btn.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            border-color: #fbbf24;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.5);
        }
        .mode-description {
            margin-top: 12px;
            font-size: 12px;
            color: #d1fae5;
            text-align: center;
            line-height: 1.6;
        }
        @media (min-width: 768px) {
            .mode-description { font-size: 13px; }
        }
        
        /* BANKROLL RECOMMENDATIONS */
        .bankroll-recommendations {
            background: linear-gradient(135deg, rgba(217, 119, 6, 0.25) 0%, rgba(127, 29, 29, 0.3) 100%);
            border: 3px solid #fbbf24;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 12px 48px rgba(251, 191, 36, 0.4);
        }
        @media (min-width: 768px) {
            .bankroll-recommendations {
                padding: 24px;
                border-radius: 16px;
            }
        }
        .bankroll-rec-header {
            font-size: 18px;
            font-weight: bold;
            color: #fde68a;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        @media (min-width: 768px) {
            .bankroll-rec-header { font-size: 22px; margin-bottom: 20px; }
        }
        .bankroll-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        @media (min-width: 600px) {
            .bankroll-grid { grid-template-columns: repeat(3, 1fr); gap: 15px; }
        }
        .bankroll-option {
            background: rgba(6, 78, 59, 0.4);
            border: 2px solid #10b981;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        @media (min-width: 768px) {
            .bankroll-option { padding: 18px; }
        }
        .bankroll-option-label {
            font-size: 11px;
            color: #86efac;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: bold;
        }
        @media (min-width: 768px) {
            .bankroll-option-label { font-size: 12px; margin-bottom: 10px; }
        }
        .bankroll-amount {
            font-size: 24px;
            font-weight: bold;
            color: #fde68a;
            margin-bottom: 8px;
        }
        @media (min-width: 768px) {
            .bankroll-amount { font-size: 28px; margin-bottom: 10px; }
        }
        .bankroll-success {
            font-size: 16px;
            color: #fff;
            margin-bottom: 5px;
        }
        @media (min-width: 768px) {
            .bankroll-success { font-size: 18px; }
        }
        .bankroll-rolls {
            font-size: 12px;
            color: #93c5fd;
        }
        @media (min-width: 768px) {
            .bankroll-rolls { font-size: 13px; }
        }
        
        .input-flex { display: flex; gap: 8px; flex-direction: column; }
        @media (min-width: 500px) {
            .input-flex { flex-direction: row; gap: 10px; }
            .input-flex input { flex: 1; }
            .input-flex button { width: auto; padding: 14px 28px; }
        }
        
        .analysis-result { 
            background: rgba(59, 7, 100, 0.6);
            border-radius: 8px; 
            padding: 16px; 
            margin-top: 12px;
            border: 1px solid rgba(168, 85, 247, 0.3);
        }
        @media (min-width: 768px) {
            .analysis-result { border-radius: 10px; padding: 20px; margin-top: 15px; }
        }
        
        .analysis-grid { display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 12px; }
        @media (min-width: 768px) { .analysis-grid { grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; } }
        
        .fun-fact { 
            background: linear-gradient(135deg, #7e22ce 0%, #db2777 100%); 
            border: 2px solid #fbbf24; 
            border-radius: 8px; 
            padding: 14px; 
            margin-top: 12px;
            box-shadow: 0 4px 15px rgba(126, 34, 206, 0.4);
        }
        @media (min-width: 768px) {
            .fun-fact { border-radius: 10px; padding: 18px; margin-top: 15px; }
        }
        
        .fun-fact-header { 
            font-size: 15px; 
            font-weight: bold; 
            color: #fde68a; 
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        @media (min-width: 768px) {
            .fun-fact-header { font-size: 18px; margin-bottom: 10px; }
        }
        
        .error { 
            background: rgba(153, 27, 27, 0.6); 
            border-radius: 8px; 
            padding: 12px; 
            color: #fca5a5;
            border: 2px solid #ef4444;
        }
        
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        @media (min-width: 768px) {
            table { font-size: 14px; }
        }
        
        th, td { padding: 10px 6px; text-align: left; border-bottom: 1px solid #065f46; }
        @media (min-width: 768px) {
            th, td { padding: 12px; }
        }
        
        th { 
            color: #86efac; 
            font-weight: 600;
            text-transform: uppercase;
            font-size: 10px;
            letter-spacing: 0.5px;
        }
        @media (min-width: 768px) {
            th { font-size: 12px; letter-spacing: 1px; }
        }
        
        tr:hover { background: rgba(6, 78, 59, 0.4); }
        
        .insights { 
            background: linear-gradient(135deg, rgba(153, 27, 27, 0.4) 0%, rgba(127, 29, 29, 0.5) 100%);
            border: 2px solid #ef4444; 
            border-radius: 12px; 
            padding: 16px; 
            margin-top: 16px;
            box-shadow: 0 8px 32px rgba(239, 68, 68, 0.3);
        }
        @media (min-width: 768px) {
            .insights { border-radius: 16px; padding: 24px; margin-top: 24px; }
        }
        
        .insights h3 { 
            color: #fca5a5; 
            margin-bottom: 12px;
            font-size: 18px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        @media (min-width: 768px) {
            .insights h3 { margin-bottom: 15px; font-size: 22px; letter-spacing: 1px; }
        }
        
        .insights li { margin-bottom: 10px; line-height: 1.6; font-size: 13px; }
        @media (min-width: 768px) {
            .insights li { margin-bottom: 12px; line-height: 1.7; font-size: 14px; }
        }
        
        .insights strong { color: #fde68a; }
        
        .loading {
            text-align: center;
            padding: 20px;
            font-size: 16px;
            color: #fbbf24;
            display: none;
        }
        
        .loading.show {
            display: block;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(251, 191, 36, 0.3);
            border-top-color: #fbbf24;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none;
        }

        .press-settings {
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
        }
        @media (min-width: 768px) {
            .press-settings { padding: 15px; margin-top: 15px; }
        }

        /* ‚îÄ‚îÄ Mobile Fixes ‚îÄ‚îÄ */

        /* Craps number buttons: 5 cols on phone, 10 on wider */
        #crapsNumberGrid { grid-template-columns: repeat(5, 1fr) !important; }
        @media (min-width: 600px) {
            #crapsNumberGrid { grid-template-columns: repeat(10, 1fr) !important; }
        }

        /* Practice mode bet display: 2 cols on phone, 5 on wider */
        #currentBetsDisplay {
            display: grid !important;
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 8px;
        }
        @media (min-width: 480px) {
            #currentBetsDisplay { grid-template-columns: repeat(5, 1fr) !important; }
        }

        /* Tables: horizontal scroll instead of overflow */
        .optimal-card, #resultsSection .card, #optimalSection {
            overflow-x: auto;
        }
        table {
            min-width: 400px;
        }
        @media (min-width: 768px) {
            table { min-width: unset; }
        }

        /* Card header: allow wrapping so long text doesn't overflow */
        .card-header {
            flex-wrap: wrap;
            gap: 6px !important;
            word-break: break-word;
        }

        /* Bet box: ensure content fits in 2-col layout on small phones */
        @media (max-width: 479px) {
            .bet-box {
                min-height: 80px;
                padding: 8px 6px;
            }
            .bet-number { font-size: 16px; }
            .bet-amount { font-size: 13px; }
            .bet-profit { font-size: 11px; }
        }

        /* Fun-fact section: prevent large number overflow */
        .fun-fact div[style*="font-size: 28px"] {
            font-size: clamp(18px, 5vw, 28px) !important;
            word-break: break-all;
        }

        /* Craps table control row: adjust spacing on tiny screens */
        @media (max-width: 380px) {
            body { padding: 8px; }
            h1 { font-size: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <span class="dice-icon dice-face-1" id="dice1">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </span>
            CRAPLESS CRAPS ANALYZER
            <span class="dice-icon dice-face-6" id="dice2" style="animation-delay: -1.5s;">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </span>
        </h1>
        <p class="subtitle">Master The Odds ‚Ä¢ Maximize Profits</p>
        
        <!-- HERO MARKETING SECTION -->
        <div class="hero-marketing">
            <div class="hero-visual">üéØ</div>
            <h2 class="hero-headline">The #1 Mistake: Playing Past Your Peak</h2>
            <p class="hero-hook">
                Most players lose at Craps not because of bad bets‚Äîbut because they play too long. 
                The truth? Every session has a <strong>statistical sweet spot</strong> where your odds of winning are highest. 
                Miss it, and the house edge devours your bankroll.
            </p>
            <div class="hero-value">
                <div class="hero-stat">
                    <div class="hero-stat-icon">üìä</div>
                    <div class="hero-stat-text">
                        <strong>10,000 Simulations</strong><br>
                        Find your exact winning window
                    </div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-icon">‚ö°</div>
                    <div class="hero-stat-text">
                        <strong>Under 60 Seconds</strong><br>
                        Get personalized insights fast
                    </div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-icon">üéØ</div>
                    <div class="hero-stat-text">
                        <strong>Know When to Walk</strong><br>
                        Stop guessing, start winning
                    </div>
                </div>
            </div>
            <div class="hero-cta-featured">
                Smart players use data. Hopeful players donate to the casino.<br>
                <strong>Which one will you be?</strong>
            </div>
        </div>

        <!-- INFO BUTTONS SECTION -->
        <div class="info-buttons-container">
            <div class="info-button" id="howToPlayBtn">
                <span class="info-button-icon">üé≤</span>
                <span>How to Play Bubble Craps</span>
                <span class="info-button-arrow">‚ñº</span>
            </div>
            <div class="info-button" id="howToUseBtn">
                <span class="info-button-icon">üí∞</span>
                <span>Betting Tips - Bet like a Pro</span>
                <span class="info-button-arrow">‚ñº</span>
            </div>
        </div>

        <!-- HOW TO PLAY CONTENT -->
        <div class="info-content" id="howToPlayContent">
            <div class="info-content-inner">
                <h2>üé≤ How to Play Bubble Crapless Craps on the Machine</h2>
                
                <p>Bubble Crapless Craps is an electronic version of the casino game where you bet on dice rolls without the pressure of a live table. Here's how to play:</p>

                <h3>Getting Started:</h3>
                <ul>
                    <li>Insert cash or ticket into the machine</li>
                    <li>The machine will credit your account</li>
                    <li>Touch the screen to place bets on the virtual craps table</li>
                </ul>

                <div class="info-highlight">
                    <strong>The Key Difference - No "Crapping Out":</strong><br>
                    In regular craps, rolling 2, 3, or 12 on the come-out roll loses immediately. In Crapless Craps, ALL numbers (2, 3, 4, 5, 6, 8, 9, 10, 11, 12) become "point numbers" - you can win on any of them! However, only 7 loses (called "sevening out").
                </div>

                <h3>How to Bet:</h3>
                <div class="info-step">
                    <div class="info-step-title">Step 1: Place Your Bets</div>
                    Touch the numbers you want to bet on (2-12, excluding 7)
                </div>
                <div class="info-step">
                    <div class="info-step-title">Step 2: Select Amount</div>
                    Choose your bet amount for each number
                </div>
                <div class="info-step">
                    <div class="info-step-title">Step 3: Roll the Dice</div>
                    Press the "Roll" button to shoot the virtual dice
                </div>
                <div class="info-step">
                    <div class="info-step-title">Step 4: Win or Continue</div>
                    If your number hits, you win! If a 7 rolls, you lose all bets and the round ends
                </div>

                <h3>Types of Bets:</h3>
                <ul>
                    <li><strong>PLACE bets (6 & 8):</strong> Pay 7-to-6 odds. These have the lowest house edge</li>
                    <li><strong>BUY bets (2, 3, 4, 5, 9, 10, 11, 12):</strong> Pay true odds minus 5% commission. Higher payouts but higher house edge</li>
                </ul>

                <h3>Payout Examples:</h3>
                <ul>
                    <li>Bet $10 on 6 or 8 ‚Üí Win $11.67</li>
                    <li>Bet $10 on 4 or 10 ‚Üí Win $19 (after 5% commission)</li>
                    <li>Bet $10 on 2 or 12 ‚Üí Win $57 (after 5% commission)</li>
                </ul>

                <div class="info-highlight">
                    <strong>‚ö†Ô∏è The Catch:</strong><br>
                    Rolling a 7 ends your session and you lose ALL active bets. This is why session length matters - the longer you play, the higher the chance of hitting that deadly 7.
                </div>

                <h3>Cashing Out:</h3>
                <p>Press the "Cash Out" button at any time to print a ticket with your winnings. Take it to the cashier or insert it into another machine.</p>
            </div>
        </div>

        <!-- HOW TO USE TOOL CONTENT -->
        <div class="info-content" id="howToUseContent">
            <div class="info-content-inner">
                <h2>üéØ How to Use This Analyzer & Why It's Critical</h2>
                
                <p>This tool answers the most important question in Crapless Craps: <strong>"When should I walk away?"</strong></p>

                <div class="info-highlight">
                    <strong>Why This Tool Exists:</strong><br>
                    Most players lose money at Crapless Craps because they play too long. The house edge is built into every roll, and the longer you play, the more likely you'll hit a 7 and lose everything. This analyzer uses 10,000 Monte Carlo simulations to find your <strong>optimal stopping point</strong> - the exact number of rolls where you have the BEST chance of hitting your profit target before sevening out.
                </div>

                <h3>How to Use It (4 Simple Steps):</h3>

                <div class="info-step">
                    <div class="info-step-title">Step 1: Set Your Bankroll</div>
                    Enter how much money you're willing to bet per session<br>
                    <em style="color: #93c5fd; font-size: 12px;">Example: $250 means you'll have $250 worth of bets on the table</em>
                </div>

                <div class="info-step">
                    <div class="info-step-title">Step 2: Set Your Profit Target</div>
                    Enter how much profit you want to make<br>
                    <em style="color: #93c5fd; font-size: 12px;">Example: $100 means you want to turn $250 into $350</em>
                </div>

                <div class="info-step">
                    <div class="info-step-title">Step 3: Choose Your Strategy</div>
                    <ul style="margin-top: 8px;">
                        <li><strong>Flat:</strong> Equal bets on all 10 numbers (simplest, recommended for beginners)</li>
                        <li><strong>Weighted:</strong> More money on likely numbers like 6 and 8</li>
                        <li><strong>Low Edge:</strong> 60% on 6/8, 40% on others (minimizes house edge)</li>
                        <li><strong>Inside Only:</strong> Only bet on 4, 5, 6, 8, 9, 10 (reduces risk)</li>
                        <li><strong>Press Profit:</strong> Automatically increases bets after wins (aggressive, high-risk/high-reward)</li>
                        <li><strong>Press Profit Evenly:</strong> Like Press Profit, but winnings are spread equally across ALL 10 numbers instead of just the one that hit ‚Äî balanced board aggression</li>
                        <li><strong>Custom:</strong> Enter your own bet amounts for each number</li>
                    </ul>
                </div>

                <div class="info-step">
                    <div class="info-step-title">Step 4: Run Simulations</div>
                    Click "Run 10,000 Simulations" - The tool will simulate 10,000 sessions at different lengths (1-15 rolls) and tell you the OPTIMAL number of rolls to play
                </div>

                <h3>Understanding Your Results:</h3>
                <p>The tool shows you:</p>
                <ul>
                    <li><strong>Win Rate:</strong> Your chance of hitting your profit target at each session length</li>
                    <li><strong>Optimal Rolls:</strong> The exact number of rolls where your win rate is highest</li>
                    <li><strong>Average Profit:</strong> What you'd make on average (usually negative due to house edge)</li>
                    <li><strong>Seven Out %:</strong> How often you'd lose everything at each length</li>
                </ul>

                <div class="info-highlight">
                    <strong>üí° The Key Insight:</strong><br>
                    You'll discover that playing just 2-3 rolls gives you the BEST chance of winning. Playing 10+ rolls dramatically increases your chance of sevening out and losing everything.
                </div>

                <h3>Bonus Feature - Post-Session Analysis:</h3>
                <p>After playing, enter the actual rolls you got (e.g., "6,8,4,11,6") to see:</p>
                <ul>
                    <li>How much profit you actually made</li>
                    <li>How rare your roll sequence was (compared to things like lightning strikes or hole-in-ones)</li>
                    <li>Whether you beat the odds or got unlucky</li>
                </ul>

                <h3>Why This Matters:</h3>
                <p>Without this tool, you're gambling blind. With it, you're making data-driven decisions about when to walk away. The house edge is unavoidable, but smart session management can dramatically improve your odds of leaving with a profit.</p>

                <div class="info-highlight">
                    <strong>üéØ Pro Tip:</strong><br>
                    Set a hard rule: cash out after your optimal number of rolls, even if you're winning. Discipline beats luck every time.
                </div>
            </div>
        </div>

        <div class="card instruction-card">
            <div class="card-header" style="color: #fde68a; font-size: 18px; justify-content: center;">
                <span class="dice-small dice-1"><span class="dot"></span></span> QUICK START
            </div>
            <p style="line-height: 1.7; font-size: 13px; color: #d1fae5; text-align: center;">
                This analyzer runs <strong>10,000 Monte Carlo simulations</strong> to determine the <strong style="color: #fbbf24;">optimal number of rolls</strong> 
                you should play before cashing out in Crapless Craps. Choose between <strong style="color: #fbbf24;">Standard Mode</strong> 
                (enter bankroll + target) or <strong style="color: #fbbf24;">Reverse Calculator</strong> (find required bankroll for your target profit).
                After playing, use the Post-Session Analysis to see how your actual rolls performed and how rare they were.
            </p>
        </div>
        
        <!-- MODE TOGGLE -->
        <div class="mode-toggle-container">
            <div class="mode-toggle-label">üîÑ Calculator Mode</div>
            <div class="mode-toggle-buttons">
                <div class="mode-btn active" id="standardModeBtn">
                    üìä Standard<br>
                    <span style="font-size: 11px; font-weight: normal; opacity: 0.8;">Enter Bankroll and Profit Target</span>
                </div>
                <div class="mode-btn" id="reverseModeBtn">
                    üéØ Reverse Calculator<br>
                    <span style="font-size: 11px; font-weight: normal; opacity: 0.8;">Enter Profit Target, Find your bankroll</span>
                </div>
            </div>
            <div class="mode-description" id="modeDescription">
                Standard Mode: Enter your bankroll and target profit to find the optimal number of rolls.
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="dice-small dice-2"><span class="dot"></span><span class="dot"></span></span> SESSION SETUP
            </div>
            <div class="section-instruction" id="sessionInstruction">
                Set your session bankroll, target profit goal, and choose a betting strategy. The strategy determines how your bankroll is distributed across the 10 numbers (2-12). Click 'Run Simulations' to find the optimal number of rolls before cashing out.
            </div>
            
            <!-- Standard Mode Inputs -->
            <div id="standardModeInputs">
                <div class="input-group">
                    <label>üí∞ Total Bankroll Per Session ($)</label>
                    <input type="number" id="bankroll" value="250" min="50" step="50">
                </div>
                <div class="input-group">
                    <label>üéØ Target Profit ($)</label>
                    <input type="number" id="targetProfit" value="100" min="10" step="10">
                </div>
            </div>
            
            <!-- Reverse Mode Inputs -->
            <div id="reverseModeInputs" class="hidden">
                <div class="input-group">
                    <label>üéØ Target Profit ($)</label>
                    <input type="number" id="targetProfitReverse" value="100" min="10" step="10">
                </div>
                <div class="section-instruction" style="background: rgba(251, 191, 36, 0.1); border-color: #fbbf24;">
                    The calculator will run simulations with different bankroll levels to show you what bankroll amounts give you different probabilities of hitting your target profit.
                </div>
            </div>

            <div class="input-group">
                <label>üìä Betting Strategy</label>
                <select id="strategy">
                    <option value="flat">Flat - Equal on all 10 numbers</option>
                    <option value="weighted">Weighted - More on likely numbers (6/8)</option>
                    <option value="lowEdge">Low Edge - 60% on 6/8, 40% on others</option>
                    <option value="insideOnly">Inside Only - Only 4,5,6,8,9,10</option>
                    <option value="pressProfit">Press Profit - Increase bets after wins üìà</option>
                    <option value="pressProfitEvenly">Press Profit Evenly - Spread wins across ALL numbers üìà‚öñÔ∏è</option>
                    <option value="custom">Customize Your Own</option>
                </select>
            </div>
            
            <div id="pressProfitSection" class="press-settings hidden">
                <div class="card-header" style="margin-top: 0; font-size: 14px; color: #fde68a;">
                    üöÄ PRESS PROFIT SETTINGS
                </div>
                <div class="section-instruction" style="background: rgba(16, 185, 129, 0.1); border-color: #10b981;">
                    After each winning roll, this strategy increases your bet on that number by the specified percentage, reinvesting profits to reach your target faster. Higher press percentages mean faster growth but higher risk.
                </div>
                <div class="input-group">
                    <label>Press Percentage (% of profit to reinvest)</label>
                    <input type="number" id="pressPercent" value="50" min="25" max="100" step="25">
                    <div style="font-size: 11px; color: #86efac; margin-top: 5px;">
                        25% = Conservative | 50% = Balanced | 75% = Aggressive | 100% = Max Risk
                    </div>
                </div>
            </div>

            <div id="customBetsSection" class="hidden">
                <div class="card-header" style="margin-top: 15px; font-size: 14px;">
                    <span class="dice-small"></span> ENTER YOUR CUSTOM BETS
                </div>
                <div class="section-instruction">
                    Enter the exact dollar amount you want to bet on each number. The total of all your custom bets will be calculated below. Use increments of $5 for easier chip management at the table.
                </div>
                <div class="grid" style="margin-bottom: 15px;">
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">2</label>
                        <input type="number" id="custom2" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">3</label>
                        <input type="number" id="custom3" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">4</label>
                        <input type="number" id="custom4" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">5</label>
                        <input type="number" id="custom5" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">6</label>
                        <input type="number" id="custom6" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">8</label>
                        <input type="number" id="custom8" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">9</label>
                        <input type="number" id="custom9" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">10</label>
                        <input type="number" id="custom10" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">11</label>
                        <input type="number" id="custom11" value="0" min="0" step="5">
                    </div>
                    <div class="input-group" style="margin-bottom: 0;">
                        <label style="font-size: 12px;">12</label>
                        <input type="number" id="custom12" value="0" min="0" step="5">
                    </div>
                </div>
                <div style="text-align: center; font-size: 18px; font-weight: bold; color: #fde68a;">
                    Total Custom Bets: $<span id="customTotal">0</span>
                </div>
            </div>
            <button id="runSimBtn" type="button">üé≤ RUN 10,000 SIMULATIONS</button>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="dice-small dice-3"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span> CURRENT BET DISTRIBUTION (<span id="totalBankroll">$250</span> TOTAL)
            </div>
            <div class="section-instruction">
                This shows your bet allocation across all 10 numbers. Each box displays: the number, your bet amount, bet type (PLACE or BUY), and the profit you'd make if that number hits. <strong style="color: #fbbf24;">For Press Profit strategy, these are your STARTING bets</strong> - they will increase after each win.
            </div>
            <div class="grid" id="betGrid"></div>
        </div>

        <div id="loadingSection" class="loading">
            <div class="loading-spinner"></div>
            <p>Running 10,000 simulations...</p>
        </div>

        <div id="optimalSection"></div>
         <!-- BANKROLL RECOMMENDATIONS (for reverse mode) -->
        <div id="bankrollRecommendations" class="bankroll-recommendations hidden"></div>
        <div id="resultsSection"></div>

        <!-- PRACTICE MODE SECTION -->
        <div class="card" style="background: rgba(6, 78, 59, 0.3); border: 2px solid rgba(16, 185, 129, 0.3);">
            <div class="card-header" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #fff; border-color: rgba(16, 185, 129, 0.5);">
                <span class="dice-small dice-5"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></span> üé≤ PRACTICE MODE
            </div>
            <p style="font-size: 13px; color: #d1fae5; margin-bottom: 10px;">
                Practice real crapless craps! Money stays at risk once a point is established. With "Press Profit" strategy, your bets grow after each win!
            </p>
            <div class="section-instruction" style="background: rgba(16, 185, 129, 0.1); border-color: #10b981; color: #86efac;">
                <strong>How it works:</strong> Come out roll places all bets. Point is established. Money stays at risk - keep rolling! Hit your numbers for winnings. <strong style="color: #fbbf24;">With Press Profit: each win increases that number's bet using your press %.</strong> Roll the point to win and get all money back. Roll 7 to lose it all. Then new come out roll starts with your current (possibly increased) bets.
            </div>

            <!-- Session Setup Button -->
            <button id="startPracticeBtn" style="width: 100%; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #fff; padding: 16px; border: none; border-radius: 8px; font-size: 16px; font-weight: 900; margin-top: 12px; margin-bottom: 16px; cursor: pointer; letter-spacing: 1px; box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);">
                üé≤ START PRACTICE SESSION
            </button>

            <!-- Practice Game Area (hidden until session starts) -->
            <div id="practiceGameArea" class="hidden">
                <!-- Status Display -->
                <div style="background: rgba(0,0,0,0.3); border: 2px solid #10b981; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 12px;">
                        <div style="text-align: center; padding: 12px; background: rgba(6, 78, 59, 0.3); border-radius: 6px;">
                            <div style="font-size: 11px; color: #86efac; margin-bottom: 4px;">BANKROLL (Available Cash)</div>
                            <div id="practiceBankroll" style="font-size: 24px; font-weight: 900; color: #10b981;">$500</div>
                        </div>
                        <div style="text-align: center; padding: 12px; background: rgba(6, 78, 59, 0.3); border-radius: 6px;">
                            <div style="font-size: 11px; color: #86efac; margin-bottom: 4px;">SESSION PROFIT (Completed Rounds)</div>
                            <div id="practiceProfit" style="font-size: 24px; font-weight: 900; color: #fbbf24;">$0</div>
                        </div>
                    </div>
                    <div style="text-align: center; padding: 12px; background: rgba(239, 68, 68, 0.1); border: 2px solid #ef4444; border-radius: 6px;">
                        <div style="font-size: 11px; color: #fca5a5; margin-bottom: 4px;">MONEY AT RISK (Currently On Table)</div>
                        <div id="moneyAtRisk" style="font-size: 24px; font-weight: 900; color: #ef4444;">$0</div>
                    </div>
                </div>

                <!-- Dice Rolling Area -->
                <div style="background: #1a4d2e; border: 3px solid #2d5a3d; border-radius: 8px; padding: 20px; margin-bottom: 16px; box-shadow: inset 0 2px 8px rgba(0,0,0,0.5);">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 16px; min-height: 100px;">
                        <div id="practiceDice1" class="practice-dice">
                            <div class="dice-dot" style="top: 50%; left: 50%;"></div>
                        </div>
                        <div id="practiceDice2" class="practice-dice">
                            <div class="dice-dot" style="top: 50%; left: 50%;"></div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 12px;">
                        <div style="font-size: 13px; color: rgba(255,255,255,0.6); margin-bottom: 4px;">GAME STATUS</div>
                        <div id="practiceGameStatus" style="font-size: 18px; font-weight: 700; color: #fbbf24;">üé≤ READY - Click ROLL DICE</div>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 12px;">
                        <div style="font-size: 13px; color: rgba(255,255,255,0.6); margin-bottom: 4px;">LAST ROLL</div>
                        <div id="practiceLastRoll" style="font-size: 32px; font-weight: 900; color: #fff;">--</div>
                    </div>
                </div>

                <!-- Current Bets Display -->
                <div style="background: rgba(16, 185, 129, 0.1); border: 2px solid rgba(16, 185, 129, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 13px; font-weight: 700; color: #10b981; margin-bottom: 12px; text-align: center;">
                        YOUR BETS (Per Roll)
                        <span id="pressingIndicator" style="display: none; color: #fbbf24; font-size: 11px; margin-left: 8px;">üìà PRESSING ACTIVE</span>
                    </div>
                    <div id="currentBetsDisplay" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px;">
                        <!-- Populated by JavaScript -->
                    </div>
                    <div style="text-align: center; font-size: 14px; color: #86efac; margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(16, 185, 129, 0.3);">
                        Total Per Roll: <span id="practiceTotalBet" style="font-weight: 900; color: #10b981; font-size: 18px;">$0</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px;">
                    <button id="rollPracticeBtn" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #fff; padding: 16px; border: none; border-radius: 8px; font-size: 16px; font-weight: 900; cursor: pointer; letter-spacing: 1px; box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);">
                        üé≤ ROLL DICE
                    </button>
                    <button id="endPracticeBtn" style="background: rgba(239, 68, 68, 0.2); color: #fca5a5; padding: 16px; border: 2px solid #ef4444; border-radius: 8px; font-size: 14px; font-weight: 700; cursor: pointer; letter-spacing: 0.5px;">
                        END
                    </button>
                </div>

                <!-- Roll History -->
                <div style="margin-top: 16px; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                    <div style="font-size: 11px; color: #86efac; margin-bottom: 8px;">ROLL HISTORY</div>
                    <div id="practiceHistory" style="font-size: 13px; color: #d1fae5; max-height: 150px; overflow-y: auto;">
                        No rolls yet - start a session to begin!
                    </div>
                </div>
            </div>
        </div>

        <!-- CSS for Practice Mode Dice -->
        <style>
            .practice-dice {
                width: 70px;
                height: 70px;
                background: #fff;
                border-radius: 10px;
                position: relative;
                box-shadow: 0 4px 16px rgba(0,0,0,0.4);
                transition: transform 0.1s ease;
            }
            
            .dice-dot {
                position: absolute;
                width: 12px;
                height: 12px;
                background: #333;
                border-radius: 50%;
                transform: translate(-50%, -50%);
            }
            
            @keyframes diceRoll {
                0%, 100% { transform: rotate(0deg); }
                25% { transform: rotate(90deg); }
                50% { transform: rotate(180deg); }
                75% { transform: rotate(270deg); }
            }
            
            .rolling {
                animation: diceRoll 0.5s ease-in-out;
            }

            @keyframes fadeInBanner {
                from { opacity: 0; transform: translateY(-6px); }
                to   { opacity: 1; transform: translateY(0); }
            }
        </style>

        <!-- Practice Mode JavaScript -->
        <script>
            // Practice mode state (use 'var' to avoid conflicts with strict scope)
            var practiceBankroll = 500;
            var practiceStartingBankroll = 500;
            var practicePoint = null;
            var practiceHistory = [];
            var currentPracticeBets = {};
            var practiceStartingBets = {}; // Store original bets for display
            var practiceMoneyAtRisk = 0;
            var practiceSessionActive = false;
            var practiceUsePressing = false;
            var practiceUseEvenPressing = false;
            var practicePressPercent = 50;
            var practiceCompletedProfit = 0; // Profit from completed rounds (hit point or seven out)
            var practiceRollSequence = []; // Raw roll log for syncing to Analyze My Luck
            
            // Start practice session using current inputs
            function startPracticeSession() {
                console.log('Starting practice session...');
                
                const bankrollInput = document.getElementById('bankroll');
                const strategySelect = document.getElementById('strategy');
                const pressPercentInput = document.getElementById('pressPercent');
                
                if (!bankrollInput || !strategySelect) {
                    console.error('Bankroll or strategy input not found');
                    alert('Error: Cannot find bankroll or strategy settings. Please reload the page.');
                    return;
                }
                
                const bankroll = parseFloat(bankrollInput.value);
                const strategy = strategySelect.value;
                
                // Check if using press profit strategy
                practiceUsePressing = (strategy === 'pressProfit');
                practiceUseEvenPressing = (strategy === 'pressProfitEvenly');
                const anyPressing = practiceUsePressing || practiceUseEvenPressing;
                practicePressPercent = anyPressing && pressPercentInput ? parseFloat(pressPercentInput.value) : 50;
                
                console.log('Bankroll:', bankroll, 'Strategy:', strategy, 'Pressing:', practiceUsePressing, 'EvenPressing:', practiceUseEvenPressing, 'Press %:', practicePressPercent);
                
                if (isNaN(bankroll) || bankroll < 10) {
                    alert('Please enter a bankroll of at least $10');
                    return;
                }
                
                // Calculate bets using main calculateBets function
                try {
                    currentPracticeBets = calculateBets(bankroll, strategy);
                    // Store starting bets for reference
                    practiceStartingBets = {};
                    Object.keys(currentPracticeBets).forEach(k => {
                        practiceStartingBets[k] = currentPracticeBets[k];
                    });
                    console.log('Calculated bets:', currentPracticeBets);
                } catch (error) {
                    console.error('Error calculating bets:', error);
                    alert('Error calculating bets. Please try again.');
                    return;
                }
                
                // Validate custom bets
                if (strategy === 'custom') {
                    const totalBet = Object.values(currentPracticeBets).reduce((sum, bet) => sum + bet, 0);
                    if (totalBet > bankroll) {
                        alert('Total custom bets ($' + totalBet.toFixed(2) + ') exceed your bankroll ($' + bankroll.toFixed(2) + ')');
                        return;
                    }
                }
                
                // Initialize practice session
                practiceBankroll = bankroll;
                practiceStartingBankroll = bankroll;
                practicePoint = null;
                practiceHistory = [];
                practiceMoneyAtRisk = 0;
                practiceSessionActive = true;
                practiceCompletedProfit = 0; // Reset completed profit for new session
                practiceRollSequence = []; // Reset roll log for new session
                
                // Update display
                updatePracticeDisplay();
                displayCurrentPracticeBets();
                
                // Show/hide pressing indicator
                const pressingIndicator = document.getElementById('pressingIndicator');
                if (pressingIndicator) {
                    if (practiceUsePressing) {
                        pressingIndicator.style.display = 'inline';
                        pressingIndicator.textContent = `üìà PRESSING ${practicePressPercent}%`;
                    } else if (practiceUseEvenPressing) {
                        pressingIndicator.style.display = 'inline';
                        pressingIndicator.textContent = `üìà‚öñÔ∏è EVEN PRESS ${practicePressPercent}%`;
                    } else {
                        pressingIndicator.style.display = 'none';
                    }
                }
                
                // Show practice game area
                const gameArea = document.getElementById('practiceGameArea');
                if (gameArea) {
                    gameArea.classList.remove('hidden');
                    setTimeout(() => {
                        gameArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                }
                
                console.log('Practice session started successfully', practiceUsePressing ? 'with pressing' : 'without pressing');
            }
            
            // Display current bets
            function displayCurrentPracticeBets() {
                const display = document.getElementById('currentBetsDisplay');
                if (!display) return;
                
                const nums = [2,3,4,5,6,8,9,10,11,12];
                let totalBet = 0;
                
                display.innerHTML = nums.map(num => {
                    const bet = currentPracticeBets[num] || 0;
                    const startingBet = practiceStartingBets[num] || 0;
                    totalBet += bet;
                    const win = bet > 0 ? calculateWin(num, bet) : 0;
                    const betType = strategyData[num].type.toUpperCase();
                    const hasIncreased = practiceUsePressing && bet > startingBet;
                    
                    return `
                        <div style="text-align: center; padding: 8px; background: rgba(0,0,0,0.3); border-radius: 6px; border: 2px solid ${bet > 0 ? (hasIncreased ? 'rgba(251, 191, 36, 0.7)' : 'rgba(16, 185, 129, 0.5)') : 'rgba(255,255,255,0.1)'};">
                            <div style="font-size: 16px; font-weight: 900; color: #fbbf24; margin-bottom: 4px;">${num}</div>
                            <div style="font-size: 12px; color: ${hasIncreased ? '#fbbf24' : '#10b981'}; font-weight: 700;">$${bet.toFixed(2)}</div>
                            ${hasIncreased ? `<div style="font-size: 9px; color: #fde68a;">‚Üë from $${startingBet.toFixed(2)}</div>` : ''}
                            <div style="font-size: 10px; color: #86efac;">${betType}</div>
                            ${bet > 0 ? `<div style="font-size: 10px; color: #d1fae5; margin-top: 2px;">Win: $${win.toFixed(2)}</div>` : ''}
                        </div>
                    `;
                }).join('');
                
                const totalBetEl = document.getElementById('practiceTotalBet');
                if (totalBetEl) {
                    totalBetEl.textContent = '$' + totalBet.toFixed(2);
                }
            }
            
            // Show dice face
            function showDiceFace(diceElement, value) {
                if (!diceElement) return;
                
                diceElement.innerHTML = '';
                const positions = {
                    1: [[50, 50]],
                    2: [[30, 30], [70, 70]],
                    3: [[30, 30], [50, 50], [70, 70]],
                    4: [[30, 30], [30, 70], [70, 30], [70, 70]],
                    5: [[30, 30], [30, 70], [50, 50], [70, 30], [70, 70]],
                    6: [[30, 30], [30, 50], [30, 70], [70, 30], [70, 50], [70, 70]]
                };
                
                positions[value].forEach(([top, left]) => {
                    const dot = document.createElement('div');
                    dot.className = 'dice-dot';
                    dot.style.top = top + '%';
                    dot.style.left = left + '%';
                    diceElement.appendChild(dot);
                });
            }
            
            // Roll the dice
            function rollPracticeDice() {
                if (!practiceSessionActive) {
                    alert('Please start a practice session first.');
                    return;
                }
                
                const totalBet = Object.values(currentPracticeBets).reduce((sum, bet) => sum + bet, 0);
                
                if (totalBet === 0) {
                    alert('No bets configured! Please start a new practice session.');
                    return;
                }
                
                // Only check bankroll on come out roll (when point is null)
                if (practicePoint === null && totalBet > practiceBankroll) {
                    alert('Insufficient bankroll! You need $' + totalBet.toFixed(2) + ' but only have $' + practiceBankroll.toFixed(2));
                    return;
                }
                
                // Animate dice
                const dice1 = document.getElementById('practiceDice1');
                const dice2 = document.getElementById('practiceDice2');
                if (dice1) dice1.classList.add('rolling');
                if (dice2) dice2.classList.add('rolling');
                
                setTimeout(() => {
                    if (dice1) dice1.classList.remove('rolling');
                    if (dice2) dice2.classList.remove('rolling');
                    
                    // Roll the dice
                    const die1 = Math.floor(Math.random() * 6) + 1;
                    const die2 = Math.floor(Math.random() * 6) + 1;
                    const roll = die1 + die2;
                    
                    showDiceFace(dice1, die1);
                    showDiceFace(dice2, die2);
                    
                    const lastRollEl = document.getElementById('practiceLastRoll');
                    if (lastRollEl) {
                        lastRollEl.textContent = roll;
                    }
                    
                    // Process the roll
                    processPracticeRoll(roll, totalBet);
                }, 500);
            }
            
            // Sync practice roll sequence into the "Analyze My Luck" section
            function syncPracticeRollsToAnalyzer() {
                if (typeof crapsRollsArray === 'undefined' || typeof updateCrapsDisplay !== 'function') return;
                crapsRollsArray = practiceRollSequence.slice();
                updateCrapsDisplay();

                // Show a brief notification banner inside the analyze card
                const analyzeSection = document.getElementById('analysisResult');
                if (analyzeSection) {
                    const banner = document.createElement('div');
                    banner.id = 'practiceAutoSyncBanner';
                    banner.style.cssText = [
                        'background: linear-gradient(135deg, rgba(16,185,129,0.25) 0%, rgba(5,150,105,0.35) 100%)',
                        'border: 2px solid #10b981',
                        'border-radius: 10px',
                        'padding: 12px 16px',
                        'margin-top: 12px',
                        'display: flex',
                        'align-items: center',
                        'gap: 10px',
                        'font-size: 13px',
                        'color: #86efac',
                        'font-weight: 600',
                        'animation: fadeInBanner 0.4s ease'
                    ].join(';');
                    banner.innerHTML = '‚úÖ <span>Practice session rolls auto-loaded! (' + practiceRollSequence.length + ' rolls: ' + practiceRollSequence.join(' ‚Üí ') + '). Hit <strong style="color:#fbbf24">ANALYZE MY LUCK</strong> below to see your stats.</span>';
                    // Remove any prior banner first
                    const old = document.getElementById('practiceAutoSyncBanner');
                    if (old) old.remove();
                    analyzeSection.prepend(banner);
                }

                // Scroll the analyze card into view smoothly
                setTimeout(() => {
                    const analyzeCard = document.querySelector('.purple-card');
                    if (analyzeCard) analyzeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 200);
            }

            // Process a roll (main game logic)
            function processPracticeRoll(roll, totalBet) {
                let profit = 0;
                let message = '';
                const statusEl = document.getElementById('practiceGameStatus');

                // Always record every roll for Analyze My Luck sync
                practiceRollSequence.push(roll);
                
                if (practicePoint === null) {
                    // COME OUT ROLL
                    if (roll === 7) {
                        // 7 on the come-out is a PASS LINE WIN in crapless craps.
                        // Bets are "off" on the come-out ‚Äî no money is deducted,
                        // no point is established, and the player wins their pass line.
                        message = 'üéâ COME OUT 7! Pass line WINS! Roll again for a new come out.';
                        profit = 0; // place/buy bets not at risk on come-out
                        if (statusEl) {
                            statusEl.textContent = 'üéâ COME OUT 7 ‚Äî PASS LINE WIN! New come out.';
                            statusEl.style.color = '#10b981';
                        }
                        // practicePoint stays null ‚Äî new come-out next roll
                    } else {
                        // Any non-7 number establishes the point in crapless craps
                        practicePoint = roll;
                        
                        // Deduct bets from bankroll (money is now at risk)
                        practiceBankroll -= totalBet;
                        practiceMoneyAtRisk = totalBet;
                        
                        message = `Point is ${roll} - $${totalBet.toFixed(2)} at risk`;
                        if (statusEl) {
                            statusEl.textContent = 'üéØ POINT: ' + roll + ' - Keep Rolling!';
                            statusEl.style.color = '#fbbf24';
                        }
                    }
                    
                } else {
                    // POINT IS ESTABLISHED
                    if (roll === 7) {
                        // SEVEN OUT - Lose all money at risk (already deducted on come out)
                        profit = -practiceMoneyAtRisk;
                        
                        // Finalize this round's loss
                        const thisRoundProfit = practiceBankroll - practiceStartingBankroll - practiceCompletedProfit;
                        practiceCompletedProfit += thisRoundProfit;
                        
                        message = `‚ùå SEVEN OUT! Lost $${practiceMoneyAtRisk.toFixed(2)} (Point was ${practicePoint})`;
                        if (statusEl) {
                            statusEl.textContent = '‚ùå SEVEN OUT! - Roll for new come out';
                            statusEl.style.color = '#ef4444';
                        }
                        practicePoint = null;
                        practiceMoneyAtRisk = 0;
                        syncPracticeRollsToAnalyzer();
                        
                    } else if (roll === practicePoint) {
                        // POINT HIT - Winner!
                        const betOnPoint = currentPracticeBets[roll];
                        const winnings = betOnPoint > 0 ? calculateWin(roll, betOnPoint) : 0;
                        
                        // Calculate round profit: get back all money at risk plus winnings
                        let roundProfit = practiceMoneyAtRisk + winnings;
                        
                        // PRESS PROFIT: Split winnings if pressing
                        if ((practiceUsePressing || practiceUseEvenPressing) && winnings > 0) {
                            const pressAmount = winnings * (practicePressPercent / 100);
                            const keepAmount = winnings - pressAmount;
                            
                            if (practiceUsePressing) {
                                // Original: increase only the point number's bet
                                currentPracticeBets[roll] += pressAmount;
                                message = `üéâ POINT ${roll} HIT! Won $${winnings.toFixed(2)}, Kept $${keepAmount.toFixed(2)}, Pressed $${pressAmount.toFixed(2)} ‚Üí Bet on ${roll} now $${currentPracticeBets[roll].toFixed(2)}`;
                            } else {
                                // Even: spread press evenly across all 10 numbers
                                const perNum = pressAmount / 10;
                                [2,3,4,5,6,8,9,10,11,12].forEach(n => { currentPracticeBets[n] += perNum; });
                                message = `üéâ POINT ${roll} HIT! Won $${winnings.toFixed(2)}, Kept $${keepAmount.toFixed(2)}, Spread $${pressAmount.toFixed(2)} evenly (+$${perNum.toFixed(2)} on each number)`;
                            }
                            
                            // Round profit: money at risk back + winnings kept
                            // Note: pressed amount goes back into next round's bets
                            roundProfit = practiceMoneyAtRisk + keepAmount;
                        } else {
                            message = `üéâ POINT ${roll} HIT! Won $${winnings.toFixed(2)}, Total return: $${roundProfit.toFixed(2)}`;
                        }
                        
                        // Add round profit to bankroll
                        profit = roundProfit;
                        practiceBankroll += roundProfit;
                        
                        // Finalize this round's profit
                        const thisRoundProfit = practiceBankroll - practiceStartingBankroll - practiceCompletedProfit;
                        practiceCompletedProfit += thisRoundProfit;
                        
                        if (statusEl) {
                            statusEl.textContent = 'üéâ WINNER! - Roll for new come out';
                            statusEl.style.color = '#10b981';
                        }
                        
                        practicePoint = null;
                        practiceMoneyAtRisk = 0;
                        syncPracticeRollsToAnalyzer();
                        
                        // Update display to show new bet amounts if pressing
                        if (practiceUsePressing || practiceUseEvenPressing) {
                            displayCurrentPracticeBets();
                        }
                        
                    } else {
                        // OTHER NUMBER (not point, not 7)
                        // Money stays at risk - just check for winnings on this number
                        const betOnNumber = currentPracticeBets[roll];
                        
                        if (betOnNumber > 0) {
                            const winnings = calculateWin(roll, betOnNumber);
                            
                            // PRESS PROFIT: Split winnings between bankroll and pressing
                            if (practiceUsePressing || practiceUseEvenPressing) {
                                const pressAmount = winnings * (practicePressPercent / 100);
                                const keepAmount = winnings - pressAmount;
                                
                                // Keep portion goes to bankroll
                                practiceBankroll += keepAmount;
                                
                                if (practiceUsePressing) {
                                    // Original: press only the rolled number
                                    currentPracticeBets[roll] += pressAmount;
                                    practiceMoneyAtRisk += pressAmount;
                                    profit = keepAmount;
                                    message = `Rolled ${roll} - Won $${winnings.toFixed(2)}! Kept $${keepAmount.toFixed(2)}, Pressed $${pressAmount.toFixed(2)} ‚Üí Bet now $${currentPracticeBets[roll].toFixed(2)}, At risk now $${practiceMoneyAtRisk.toFixed(2)} (Point still ${practicePoint})`;
                                } else {
                                    // Even: spread press across all 10 numbers
                                    const perNum = pressAmount / 10;
                                    [2,3,4,5,6,8,9,10,11,12].forEach(n => { currentPracticeBets[n] += perNum; });
                                    practiceMoneyAtRisk += pressAmount;
                                    profit = keepAmount;
                                    message = `Rolled ${roll} - Won $${winnings.toFixed(2)}! Kept $${keepAmount.toFixed(2)}, Spread $${pressAmount.toFixed(2)} evenly (+$${perNum.toFixed(2)} on all numbers), At risk now $${practiceMoneyAtRisk.toFixed(2)} (Point still ${practicePoint})`;
                                }
                                
                                // Update display to show new bet amounts and money at risk
                                displayCurrentPracticeBets();
                            } else {
                                // No pressing - all winnings go to bankroll
                                profit = winnings;
                                practiceBankroll += profit;
                                message = `Rolled ${roll} - Won $${winnings.toFixed(2)} on that number! (Point still ${practicePoint})`;
                            }
                        } else {
                            profit = 0;
                            message = `Rolled ${roll} - No bet on this number (Point still ${practicePoint})`;
                        }
                        
                        // Money at risk may have increased if pressing
                    }
                }
                
                // Update display
                updatePracticeDisplay();
                
                // Add to history
                practiceHistory.unshift({
                    roll: roll,
                    profit: profit,
                    message: message,
                    point: practicePoint
                });
                
                if (practiceHistory.length > 15) {
                    practiceHistory.pop();
                }
                
                updatePracticeHistory();
                
                // Check for broke
                if (practiceBankroll <= 0 && practiceMoneyAtRisk === 0) {
                    setTimeout(() => {
                        alert('You\'re broke! Session ended. Start a new session to continue.');
                        endPracticeSession();
                    }, 1000);
                }
            }
            
            // Update practice display
            function updatePracticeDisplay() {
                const bankrollEl = document.getElementById('practiceBankroll');
                const profitEl = document.getElementById('practiceProfit');
                const atRiskEl = document.getElementById('moneyAtRisk');
                
                if (bankrollEl) {
                    bankrollEl.textContent = '$' + practiceBankroll.toFixed(2);
                    bankrollEl.style.color = practiceBankroll >= practiceStartingBankroll ? '#10b981' : '#ef4444';
                }
                
                if (profitEl) {
                    // Show completed profit (from finished rounds) while point is active
                    // When no point (come out roll), show total including current bankroll change
                    let displayProfit;
                    if (practicePoint === null) {
                        // No active point - show total profit
                        displayProfit = practiceBankroll - practiceStartingBankroll;
                    } else {
                        // Point is active - show only completed profit (pending current round)
                        displayProfit = practiceCompletedProfit;
                    }
                    
                    profitEl.textContent = (displayProfit >= 0 ? '+' : '') + '$' + displayProfit.toFixed(2);
                    profitEl.style.color = displayProfit >= 0 ? '#10b981' : '#ef4444';
                    
                    // Add "PENDING" indicator when point is active
                    const pendingIndicator = practicePoint !== null ? ' (PENDING)' : '';
                    if (practicePoint !== null && !profitEl.textContent.includes('PENDING')) {
                        profitEl.textContent += pendingIndicator;
                    }
                }
                
                if (atRiskEl) {
                    atRiskEl.textContent = '$' + practiceMoneyAtRisk.toFixed(2);
                }
            }
            
            // Update practice history
            function updatePracticeHistory() {
                const historyEl = document.getElementById('practiceHistory');
                if (!historyEl) return;
                
                if (practiceHistory.length === 0) {
                    historyEl.textContent = 'No rolls yet';
                } else {
                    historyEl.innerHTML = practiceHistory.map(h => {
                        const color = h.profit >= 0 ? '#10b981' : '#ef4444';
                        const sign = h.profit >= 0 ? '+' : '';
                        return `<div style="margin-bottom: 6px; padding: 8px; background: rgba(0,0,0,0.3); border-left: 3px solid ${color}; border-radius: 4px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                <span style="font-weight: 700; color: #fbbf24;">Roll: ${h.roll}</span>
                                <span style="font-weight: 700; color: ${color};">${sign}$${h.profit.toFixed(2)}</span>
                            </div>
                            <div style="font-size: 12px; color: #d1fae5;">${h.message}</div>
                        </div>`;
                    }).join('');
                }
            }
            
            // End practice session
            function endPracticeSession() {
                const gameArea = document.getElementById('practiceGameArea');
                if (gameArea) {
                    gameArea.classList.add('hidden');
                }
                practicePoint = null;
                practiceHistory = [];
                practiceMoneyAtRisk = 0;
                practiceSessionActive = false;
                practiceUsePressing = false;
                practiceUseEvenPressing = false;
                practiceCompletedProfit = 0;
                // Sync whatever rolls were recorded to Analyze My Luck before clearing
                if (practiceRollSequence.length > 0) {
                    syncPracticeRollsToAnalyzer();
                }
                practiceRollSequence = [];
                
                const historyEl = document.getElementById('practiceHistory');
                if (historyEl) {
                    historyEl.textContent = 'No rolls yet - start a session to begin!';
                }
                
                const statusEl = document.getElementById('practiceGameStatus');
                if (statusEl) {
                    statusEl.textContent = 'üé≤ READY - Click ROLL DICE';
                    statusEl.style.color = '#fbbf24';
                }
                
                console.log('Practice session ended');
            }
        </script>

        <div class="card purple-card">
            <div class="card-header purple-header">
                <span class="dice-small dice-4" style="background: linear-gradient(135deg, #a855f7 0%, #7e22ce 100%);"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></span> HOW LUCKY WAS YOUR ROLL?
            </div>
            <p style="font-size: 13px; color: #e9d5ff; margin-bottom: 10px;">
                Click the numbers as you roll them on the bubble craps machine ‚Äî or finish a <strong style="color: #86efac;">Practice Mode</strong> session and your rolls will be auto-loaded here!
            </p>
            <div class="section-instruction" style="background: rgba(168, 85, 247, 0.1); border-color: #a855f7; color: #c4b5fd;">
                Track your session by tapping each number as it appears. Hit "7" when you seven out, or "ANALYZE" to see your luck stats. Press "RESET" to start over.
            </div>
            
            <!-- Craps Table Display -->
            <div style="background: #1a4d2e; border: 3px solid #2d5a3d; border-radius: 8px; padding: 20px; margin-bottom: 12px; box-shadow: inset 0 2px 8px rgba(0,0,0,0.5);">
                <!-- Roll Display -->
                <div style="background: rgba(0,0,0,0.4); border: 2px solid rgba(255,255,255,0.3); padding: 12px; min-height: 50px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; border-radius: 4px;">
                    <div id="crapsRollDisplay" style="color: #fff; font-size: 16px; font-weight: 700; text-align: center; font-family: Arial, sans-serif; letter-spacing: 2px;">
                        <span style="color: rgba(255, 255, 255, 0.5); font-style: italic;">READY TO ROLL</span>
                    </div>
                </div>
                
                <!-- Craps Table - All Numbers 2-12 (10 buttons: 2,3,4,5,6,8,9,10,11,12) -->
                <div id="crapsNumberGrid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-bottom: 12px;">
                    <button onclick="addCrapsRoll(2)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">2</button>
                    <button onclick="addCrapsRoll(3)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">3</button>
                    <button onclick="addCrapsRoll(4)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">4</button>
                    <button onclick="addCrapsRoll(5)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">5</button>
                    <button onclick="addCrapsRoll(6)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">6</button>
                    <button onclick="addCrapsRoll(8)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">8</button>
                    <button onclick="addCrapsRoll(9)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">9</button>
                    <button onclick="addCrapsRoll(10)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">10</button>
                    <button onclick="addCrapsRoll(11)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">11</button>
                    <button onclick="addCrapsRoll(12)" style="background: #2d6a4f; color: #fff; border: 3px solid #fff; padding: 20px 4px; font-size: 24px; font-weight: 900; cursor: pointer; transition: all 0.2s; text-align: center;">12</button>
                </div>
                
                <!-- Control Row -->
                <div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 6px;">
                    <button onclick="removeCrapsRoll()" style="background: #2d6a4f; color: #fff; border: 3px solid #fbbf24; padding: 12px; font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.2s; letter-spacing: 0.5px;">‚å´ BACK</button>
                    <button onclick="resetCrapsRolls()" style="background: #2d6a4f; color: #fff; border: 3px solid #94a3b8; padding: 12px; font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.2s; letter-spacing: 0.5px;">üîÑ RESET</button>
                    <button onclick="sevenOut()" style="background: #2d6a4f; color: #ef4444; border: 3px solid #ef4444; padding: 12px; font-size: 16px; font-weight: 900; cursor: pointer; transition: all 0.2s; letter-spacing: 1px;">üé≤ 7</button>
                </div>
            </div>
            
            <input type="hidden" id="historicalRolls">
            <button id="analyzeBtn" type="button" onclick="analyzeCrapsRolls()" style="width: 100%; background: linear-gradient(135deg, #a855f7 0%, #7e22ce 100%); color: #fff; padding: 14px; border: none; border-radius: 8px; font-size: 15px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4); transition: all 0.3s;">üìä ANALYZE MY LUCK</button>
            
            <div id="analysisResult"></div>
        </div>
        
        <script>
            let crapsRollsArray = [];
            
            function addCrapsRoll(num) {
                crapsRollsArray.push(num);
                updateCrapsDisplay();
            }
            
            function removeCrapsRoll() {
                if (crapsRollsArray.length > 0) {
                    crapsRollsArray.pop();
                    updateCrapsDisplay();
                }
            }
            
            function sevenOut() {
                crapsRollsArray.push(7);
                updateCrapsDisplay();
            }
            
            function resetCrapsRolls() {
                crapsRollsArray = [];
                updateCrapsDisplay();
                // Also clear the analysis results
                const analysisResult = document.getElementById('analysisResult');
                if (analysisResult) {
                    analysisResult.innerHTML = '';
                }
            }
            
            function updateCrapsDisplay() {
                const displayEl = document.getElementById('crapsRollDisplay');
                if (crapsRollsArray.length === 0) {
                    displayEl.innerHTML = '<span style="color: rgba(255, 255, 255, 0.5); font-style: italic;">READY TO ROLL</span>';
                } else {
                    displayEl.innerHTML = crapsRollsArray.join(' ‚Üí ');
                }
                // Also update the hidden input for the existing analyze function
                const inputField = document.getElementById('historicalRolls');
                if (inputField) {
                    inputField.value = crapsRollsArray.join(',');
                }
            }
            
            function analyzeCrapsRolls() {
                // Update the hidden input field with current rolls
                const inputField = document.getElementById('historicalRolls');
                if (inputField) {
                    inputField.value = crapsRollsArray.join(',');
                }
                
                // Trigger the existing analyze button click
                const analyzeBtn = document.getElementById('analyzeBtn');
                if (analyzeBtn) {
                    analyzeBtn.click();
                }
                
                // Scroll to results after a short delay to allow content to render
                setTimeout(() => {
                    const analysisResult = document.getElementById('analysisResult');
                    if (analysisResult && analysisResult.innerHTML.trim() !== '') {
                        analysisResult.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 300);
            }
        </script>

        <div class="insights">
            <h2>üéØ QUICK BETTING GUIDE</h2>
            
            <div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(217, 119, 6, 0.2) 100%); border: 2px solid #fbbf24; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                <div style="font-size: 15px; font-weight: bold; color: #fde68a; margin-bottom: 12px; text-align: center;">üìã REGULAR CRAPS CHEAT SHEET</div>
                
                <div style="display: grid; gap: 10px;">
                    <div style="background: rgba(34, 197, 94, 0.15); border: 1px solid #22c55e; border-radius: 6px; padding: 10px;">
                        <div style="font-weight: bold; color: #86efac; margin-bottom: 4px;">6 & 8 ‚Üí ALWAYS PLACE</div>
                        <div style="font-size: 12px; color: #d1fae5;">Best bets in craps! 1.52% house edge. Bet in multiples of $6.</div>
                    </div>
                    
                    <div style="background: rgba(234, 179, 8, 0.15); border: 1px solid #eab308; border-radius: 6px; padding: 10px;">
                        <div style="font-weight: bold; color: #fde047; margin-bottom: 4px;">5 & 9 ‚Üí PLACE (unless $50+)</div>
                        <div style="font-size: 12px; color: #fef3c7;">4% house edge. Bet in multiples of $5. Most players just place these.</div>
                    </div>
                    
                    <div style="background: rgba(239, 68, 68, 0.15); border: 1px solid #ef4444; border-radius: 6px; padding: 10px;">
                        <div style="font-weight: bold; color: #fca5a5; margin-bottom: 4px;">4 & 10 ‚Üí BUY at $25+, else PLACE</div>
                        <div style="font-size: 12px; color: #fecaca;">At $25: pay $1 vig, win $50 (vs $45 placing). Below $25: just place.</div>
                    </div>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(126, 34, 206, 0.2) 100%); border: 2px solid #a855f7; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                <div style="font-size: 15px; font-weight: bold; color: #e9d5ff; margin-bottom: 12px; text-align: center;">üî• CRAPLESS CRAPS EXTREMES</div>
                
                <div style="display: grid; gap: 10px;">
                    <div style="background: rgba(168, 85, 247, 0.2); border: 1px solid #c4b5fd; border-radius: 6px; padding: 10px;">
                        <div style="font-weight: bold; color: #e9d5ff; margin-bottom: 4px;">2 & 12 ‚Üí ALWAYS BUY</div>
                        <div style="font-size: 12px; color: #f3e8ff;">True 6:1 odds with vig is WAY better than 5.5:1 placing.</div>
                    </div>
                    
                    <div style="background: rgba(168, 85, 247, 0.2); border: 1px solid #c4b5fd; border-radius: 6px; padding: 10px;">
                        <div style="font-weight: bold; color: #e9d5ff; margin-bottom: 4px;">3 & 11 ‚Üí ALWAYS BUY</div>
                        <div style="font-size: 12px; color: #f3e8ff;">True 3:1 odds with vig beats 2.75:1 placing every time.</div>
                    </div>
                    
                    <div style="background: rgba(168, 85, 247, 0.2); border: 1px solid #c4b5fd; border-radius: 6px; padding: 10px;">
                        <div style="font-weight: bold; color: #e9d5ff; margin-bottom: 4px;">4, 5, 6, 8, 9, 10 ‚Üí Same as regular craps</div>
                        <div style="font-size: 12px; color: #f3e8ff;">Follow the cheat sheet above for these numbers.</div>
                    </div>
                </div>
            </div>

            <h3>üí° Bubble Craps Pro Tips</h3>
            <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.15) 100%); border: 1px solid #10b981; border-radius: 8px; padding: 12px;">
                <p style="line-height: 1.7; font-size: 13px;">
                    <strong style="color: #86efac;">‚úì Vig on Win Only:</strong> Most machines only charge commission when you WIN - buy bets are even better!<br>
                    <strong style="color: #86efac;">‚úì Lower Minimums:</strong> $1-$5 minimums make proper bet sizing easy.<br>
                    <strong style="color: #86efac;">‚úì No Pressure:</strong> Take your time - no dealer rushing you!<br>
                    <strong style="color: #86efac;">‚úì Track Your Session:</strong> Use "HOW LUCKY WAS YOUR ROLL?" to analyze your results!
                </p>
            </div>
        </div>
    </div>

    <!-- Paywall engine ‚Äî must execute before the app script -->
    <script src="./paywall.js"></script>

    <script>
        const strategyData = {
            2:  {ways: 1, type: 'buy', trueOdds: 6.0, placePayout: 5.5},
            3:  {ways: 2, type: 'buy', trueOdds: 3.0, placePayout: 2.75},
            4:  {ways: 3, type: 'buy', trueOdds: 2.0, placePayout: 1.8},
            5:  {ways: 4, type: 'buy', trueOdds: 1.5, placePayout: 1.4},
            6:  {ways: 5, type: 'place', trueOdds: 1.2, placePayout: 7/6},
            8:  {ways: 5, type: 'place', trueOdds: 1.2, placePayout: 7/6},
            9:  {ways: 4, type: 'buy', trueOdds: 1.5, placePayout: 1.4},
            10: {ways: 3, type: 'buy', trueOdds: 2.0, placePayout: 1.8},
            11: {ways: 2, type: 'buy', trueOdds: 3.0, placePayout: 2.75},
            12: {ways: 1, type: 'buy', trueOdds: 6.0, placePayout: 5.5},
        };

        const funFacts = [
            { odds: 1/15300, description: "getting struck by lightning in your lifetime" },
            { odds: 1/12500, description: "hitting a hole-in-one in golf" },
            { odds: 1/649740, description: "getting a royal flush in poker" },
            { odds: 1/1024, description: "flipping heads 10 times in a row" },
            { odds: 1/216, description: "rolling three dice and getting all sixes" },
            { odds: 1/1000, description: "finding a four-leaf clover" },
            { odds: 1/292201338, description: "winning the Powerball jackpot" },
            { odds: 1/128, description: "flipping heads 7 times in a row" },
            { odds: 1/50, description: "an IRS audit" },
        ];

        // Info button toggle functionality
        function toggleInfoSection(buttonId, contentId) {
            const button = document.getElementById(buttonId);
            const content = document.getElementById(contentId);
            const otherButtonId = buttonId === 'howToPlayBtn' ? 'howToUseBtn' : 'howToPlayBtn';
            const otherContentId = contentId === 'howToPlayContent' ? 'howToUseContent' : 'howToPlayContent';
            const otherButton = document.getElementById(otherButtonId);
            const otherContent = document.getElementById(otherContentId);

            // Close other section if open
            if (otherContent.classList.contains('show')) {
                otherContent.classList.remove('show');
                otherButton.classList.remove('active');
            }

            // Toggle current section
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                button.classList.remove('active');
            } else {
                content.classList.add('show');
                button.classList.add('active');
                // Smooth scroll to content
                setTimeout(() => {
                    content.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);
            }
        }

        function calculateBets(bankroll, strategy) {
            const bets = {};
            const nums = [2,3,4,5,6,8,9,10,11,12];

            if (strategy === 'flat' || strategy === 'pressProfit' || strategy === 'pressProfitEvenly') {
                const bet = bankroll / 10;
                nums.forEach(n => bets[n] = bet);
            } else if (strategy === 'weighted') {
                const totalWays = nums.reduce((s, n) => s + strategyData[n].ways, 0);
                nums.forEach(n => bets[n] = bankroll * (strategyData[n].ways / totalWays));
            } else if (strategy === 'lowEdge') {
                [6, 8].forEach(n => bets[n] = bankroll * 0.3);
                [2,3,4,5,9,10,11,12].forEach(n => bets[n] = bankroll * 0.05);
            } else if (strategy === 'insideOnly') {
                const bet = bankroll / 6;
                [4,5,6,8,9,10].forEach(n => bets[n] = bet);
                [2,3,11,12].forEach(n => bets[n] = 0);
            } else if (strategy === 'custom') {
                nums.forEach(n => {
                    bets[n] = parseFloat(document.getElementById(`custom${n}`).value) || 0;
                });
            }
            return bets;
        }

        function calculateWin(num, amount) {
            const data = strategyData[num];
            if (data.type === 'place') {
                return amount * data.placePayout;
            } else {
                const gross = amount * data.trueOdds;
                return gross - (gross * 0.05);
            }
        }

        function updateCustomTotal() {
            const nums = [2,3,4,5,6,8,9,10,11,12];
            let total = 0;
            nums.forEach(n => {
                total += parseFloat(document.getElementById(`custom${n}`).value) || 0;
            });
            document.getElementById('customTotal').textContent = total.toFixed(2);
            updateBetDisplay();
        }

        function toggleCustomBets() {
            const strategy = document.getElementById('strategy').value;
            const customSection = document.getElementById('customBetsSection');
            const pressProfitSection = document.getElementById('pressProfitSection');
            
            if (strategy === 'custom') {
                customSection.classList.remove('hidden');
            } else {
                customSection.classList.add('hidden');
            }
            
            if (strategy === 'pressProfit' || strategy === 'pressProfitEvenly') {
                pressProfitSection.classList.remove('hidden');
            } else {
                pressProfitSection.classList.add('hidden');
            }
            
            updateBetDisplay();
        }

        function updateBetDisplay() {
            const bankroll = parseFloat(document.getElementById('bankroll').value);
            const strategy = document.getElementById('strategy').value;
            const bets = calculateBets(bankroll, strategy);
            
            let totalBets = Object.values(bets).reduce((sum, bet) => sum + bet, 0);
            document.getElementById('totalBankroll').textContent = `$${totalBets.toFixed(0)}`;
            
            let html = '';
            [2,3,4,5,6,8,9,10,11,12].forEach(num => {
                const bet = bets[num];
                const profit = bet > 0 ? calculateWin(num, bet) : 0;
                html += `
                    <div class="bet-box">
                        <div class="bet-number">${num}</div>
                        <div class="bet-amount">$${bet.toFixed(0)}</div>
                        <div class="bet-type">${strategyData[num].type.toUpperCase()}</div>
                        <div class="bet-profit">+$${profit.toFixed(0)}</div>
                    </div>
                `;
            });
            document.getElementById('betGrid').innerHTML = html;
        }

        // pressMode: 'none' | 'single' (press only the hit number) | 'even' (spread evenly across all numbers)
        function simulateSession(rolls, bets, pressMode, pressPercent) {
            pressMode = pressMode || 'none';
            pressPercent = pressPercent || 50;
            let profit = 0;
            const nums = [2,3,4,5,6,8,9,10,11,12];

            const currentBets = {};
            Object.keys(bets).forEach(function(k) { currentBets[k] = bets[k]; });

            // Track whether a point has been established.
            // On the come-out roll, rolling a 7 is a PASS LINE WIN ‚Äî bets are off,
            // no money is lost, and we start a fresh come-out next roll.
            var pointEstablished = false;

            for (let i = 0; i < rolls; i++) {
                const roll = Math.floor(Math.random() * 36);

                if (!pointEstablished) {
                    // ‚îÄ‚îÄ COME-OUT ROLL ‚îÄ‚îÄ
                    if (roll < 6) {
                        // 7 on come-out = pass line win. Place/buy bets are "off".
                        // No loss, no gain for our bet tracking ‚Äî just continue.
                        continue;
                    }
                    // Any non-7 establishes the point; bets are now active.
                    pointEstablished = true;
                    // No winnings collected on the come-out establishing roll itself.
                } else {
                    // ‚îÄ‚îÄ POINT IS ESTABLISHED ‚îÄ‚îÄ
                    if (roll < 6) {
                        // Seven out ‚Äî lose all currently-pressed bets on the table
                        const currentTotal = Object.values(currentBets).reduce(function(s, b) { return s + b; }, 0);
                        profit -= currentTotal;
                        break;
                    }

                    let cum = 6;
                    for (let ni = 0; ni < nums.length; ni++) {
                        const n = nums[ni];
                        cum += strategyData[n].ways;
                        if (roll < cum) {
                            if (currentBets[n] > 0) {
                                const winAmount = calculateWin(n, currentBets[n]);
                                profit += winAmount;

                                if (pressMode === 'single') {
                                    // Original: press only the number that was just hit
                                    const pressAmount = winAmount * (pressPercent / 100);
                                    currentBets[n] += pressAmount;
                                } else if (pressMode === 'even') {
                                    // New: spread the press evenly across all 10 numbers
                                    const pressAmount = winAmount * (pressPercent / 100);
                                    const perNum = pressAmount / nums.length;
                                    nums.forEach(function(num) { currentBets[num] += perNum; });
                                }
                            }
                            break;
                        }
                    }
                }
            }
            return profit;
        }

        let isProcessing = false;
        let currentMode = 'standard';
        
        function runSimulation() {
            // ‚îÄ‚îÄ PAYWALL GATE: decrement free-sim counter or show modal ‚îÄ‚îÄ
            if (window.CrapsPaywall && !window.CrapsPaywall.attemptSimulation()) return;

            console.log('Running simulation...');
            if (currentMode === 'reverse') {
                runReverseSimulation();
                return;
            }
            console.log('Running simulation...');
            const bankroll = parseFloat(document.getElementById('bankroll').value);
            const target = parseFloat(document.getElementById('targetProfit').value);
            const strategy = document.getElementById('strategy').value;
            const bets = calculateBets(bankroll, strategy);
            const pressMode = strategy === 'pressProfit' ? 'single' : strategy === 'pressProfitEvenly' ? 'even' : 'none';
            const pressPercent = (pressMode !== 'none') ? parseFloat(document.getElementById('pressPercent').value) : 50;
            
            if (!bankroll || !target || bankroll < 50) {
                alert('Please enter valid bankroll and target profit values.');
                isProcessing = false;
                return;
            }
            
            document.getElementById('loadingSection').classList.add('show');
            document.getElementById('optimalSection').innerHTML = '';
            document.getElementById('resultsSection').innerHTML = '';
            
            setTimeout(() => {
                document.getElementById('loadingSection').scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
            
            setTimeout(() => {
                const results = [];
                for (let sessionLen = 1; sessionLen <= 15; sessionLen++) {
                    let wins = 0, totalProfit = 0, sevens = 0;
                    const profits = [];
                    
                    for (let i = 0; i < 10000; i++) {
                        const p = simulateSession(sessionLen, bets, pressMode, pressPercent);
                        totalProfit += p;
                        profits.push(p);
                        if (p >= target) wins++;
                        if (p < 0) sevens++;
                    }
                    
                    profits.sort((a, b) => a - b);
                    results.push({
                        rolls: sessionLen,
                        winRate: ((wins / 10000) * 100).toFixed(1),
                        avgProfit: (totalProfit / 10000).toFixed(2),
                        median: profits[5000].toFixed(2),
                        sevenOut: ((sevens / 10000) * 100).toFixed(1),
                        completion: (((10000 - sevens) / 10000) * 100).toFixed(1)
                    });
                }
                
                displayResults(results, pressMode);
                
                document.getElementById('loadingSection').classList.remove('show');
                
                setTimeout(() => {
                    document.getElementById('optimalSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
                
                isProcessing = false;
            }, 1000);
        }

        function displayResults(results, pressMode) {
            pressMode = pressMode || 'none';
            const optimal = results.reduce((best, r) => 
                parseFloat(r.winRate) > parseFloat(best.winRate) ? r : best
            );
            
            let strategyNote = '';
            if (pressMode === 'single') {
                strategyNote = '<div style="background: rgba(16, 185, 129, 0.15); border: 2px solid #10b981; border-radius: 8px; padding: 12px; margin-top: 15px; text-align: center;"><strong style="color: #fde68a;">üìà Press Profit Active:</strong> <span style="color: #86efac;">After each win, that number\'s bet grows by your press %. Accelerates profit but increases risk.</span></div>';
            } else if (pressMode === 'even') {
                strategyNote = '<div style="background: rgba(16, 185, 129, 0.15); border: 2px solid #10b981; border-radius: 8px; padding: 12px; margin-top: 15px; text-align: center;"><strong style="color: #fde68a;">üìà‚öñÔ∏è Press Profit Evenly Active:</strong> <span style="color: #86efac;">After each win, the press amount is divided equally and added to ALL 10 numbers. Balanced aggression across the whole board.</span></div>';
            }
            
            document.getElementById('optimalSection').innerHTML = `
                <div class="optimal-card">
                    <div class="optimal-header">üèÜ OPTIMAL SESSION: ${optimal.rolls} ROLLS</div>
                    <div class="section-instruction" style="background: rgba(0, 0, 0, 0.2); border-color: #fbbf24; color: #fde68a; text-align: center; margin-bottom: 20px;">
                        Based on 10,000 simulations, this is the ideal number of rolls to play before walking away to maximize your chance of hitting your target profit.
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Win Rate</div>
                            <div class="stat-value">${optimal.winRate}%</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Avg Profit</div>
                            <div class="stat-value">$${optimal.avgProfit}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Median Profit</div>
                            <div class="stat-value">$${optimal.median}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Completion</div>
                            <div class="stat-value">${optimal.completion}%</div>
                        </div>
                    </div>
                    ${strategyNote}
                </div>
            `;
            
            let tableHTML = `
                <div class="card">
                    <div class="card-header">
                        üìä DETAILED RESULTS (10,000 SIMULATIONS PER SESSION LENGTH)
                    </div>
                    <div class="section-instruction">
                        Complete breakdown showing win rates and average profits for different session lengths. The highlighted row shows your optimal stopping point. 'Seven Out %' shows how often you'd lose everything at that length.
                    </div>
                    <div style="overflow-x: auto;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Rolls</th>
                                    <th>Win Rate</th>
                                    <th>Avg Profit</th>
                                    <th>Median</th>
                                    <th>Seven Out %</th>
                                </tr>
                            </thead>
                            <tbody>
            `;
            
            results.forEach(r => {
                const highlight = r.rolls === optimal.rolls ? 'background: rgba(217, 119, 6, 0.3); border-left: 4px solid #fbbf24;' : '';
                tableHTML += `
                    <tr style="${highlight}">
                        <td><strong>${r.rolls}</strong></td>
                        <td><strong style="color: #86efac;">${r.winRate}%</strong></td>
                        <td style="color: ${parseFloat(r.avgProfit) > 0 ? '#86efac' : '#fca5a5'}; font-weight: bold;">$${r.avgProfit}</td>
                        <td>$${r.median}</td>
                        <td style="color: #fca5a5;">${r.sevenOut}%</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table></div></div>';
            document.getElementById('resultsSection').innerHTML = tableHTML;
        }
        function runReverseSimulation() {
            if (isProcessing) return;
            isProcessing = true;
            
            const targetProfit = parseFloat(document.getElementById('targetProfitReverse').value);
            const strategy = document.getElementById('strategy').value;
            const pressMode = strategy === 'pressProfit' ? 'single' : strategy === 'pressProfitEvenly' ? 'even' : 'none';
            const pressPercent = (pressMode !== 'none') ? parseFloat(document.getElementById('pressPercent').value) : 50;
            
            if (!targetProfit || targetProfit <= 0) {
                document.getElementById('bankrollRecommendations').innerHTML = '<div class="error">Please enter a valid target profit amount.</div>';
                document.getElementById('bankrollRecommendations').classList.remove('hidden');
                isProcessing = false;
                return;
            }
            
            // Show loading spinner
            document.getElementById('loadingSection').classList.add('show');
            document.getElementById('optimalSection').innerHTML = '';
            document.getElementById('resultsSection').innerHTML = '';
            document.getElementById('bankrollRecommendations').classList.add('hidden');
            
            // Auto-scroll to loading section
            setTimeout(() => {
                document.getElementById('loadingSection').scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
            
            setTimeout(() => {
                const bankrollLevels = [
                    targetProfit * 1.5,
                    targetProfit * 2,
                    targetProfit * 2.5,
                    targetProfit * 3,
                    targetProfit * 4,
                    targetProfit * 5
                ];
                
                const results = bankrollLevels.map(bankroll => {
                    const bets = calculateBets(bankroll, strategy);
                    let successfulSessions = 0;
                    let totalOptimalRolls = 0;
                    
                    // Try different session lengths and find best success rate
                    for (let sessionLen = 1; sessionLen <= 15; sessionLen++) {
                        let wins = 0;
                        
                        for (let i = 0; i < 1000; i++) {
                            const profit = simulateSession(sessionLen, bets, pressMode, pressPercent);
                            if (profit >= targetProfit) {
                                wins++;
                            }
                        }
                        
                        // Track the best performing session length for this bankroll
                        if (wins > successfulSessions) {
                            successfulSessions = wins;
                            totalOptimalRolls = sessionLen * wins;
                        }
                    }
                    
                    const successRate = (successfulSessions / 1000) * 100;
                    const avgOptimalRolls = successfulSessions > 0 ? Math.round(totalOptimalRolls / successfulSessions) : 0;
                    
                    return {
                        bankroll: bankroll,
                        successRate: successRate,
                        avgOptimalRolls: avgOptimalRolls
                    };
                });
                
                let recommendationsHTML = `
                    <div class="bankroll-rec-header">üí∞ BANKROLL RECOMMENDATIONS</div>
                    <div style="text-align: center; margin-bottom: 20px; font-size: 13px; color: #d1fae5;">
                        Based on 10,000 simulations per bankroll level for your $${targetProfit.toFixed(2)} target profit
                    </div>
                    <div class="bankroll-grid">
                `;
                
                results.forEach(result => {
                    let label = '';
                    if (result.successRate >= 70) label = '‚úÖ STRONG';
                    else if (result.successRate >= 50) label = 'üëç GOOD';
                    else if (result.successRate >= 30) label = '‚ö†Ô∏è RISKY';
                    else label = '‚ùå DIFFICULT';
                    
                    recommendationsHTML += `
                        <div class="bankroll-option">
                            <div class="bankroll-option-label">${label}</div>
                            <div class="bankroll-amount">$${result.bankroll.toFixed(0)}</div>
                            <div class="bankroll-success">${result.successRate.toFixed(1)}% Success</div>
                            <div class="bankroll-rolls">${result.avgOptimalRolls} avg rolls</div>
                        </div>
                    `;
                });
                
                recommendationsHTML += `
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border: 1px solid #3b82f6;">
                        <div style="font-size: 12px; color: #93c5fd; margin-bottom: 8px; font-weight: bold;">üí° INTERPRETATION</div>
                        <div style="font-size: 11px; color: #bfdbfe; line-height: 1.6;">
                            <strong>Success Rate</strong> shows how often you'll hit your $${targetProfit.toFixed(2)} target with each bankroll level. 
                            Higher bankrolls give you more cushion to survive losing streaks. The <strong>avg rolls</strong> indicates how many 
                            rolls it typically takes to reach your target when successful. Choose based on your risk tolerance.
                        </div>
                    </div>
                `;
                
                document.getElementById('bankrollRecommendations').innerHTML = recommendationsHTML;
                
                
                // Hide loading spinner
                document.getElementById('loadingSection').classList.remove('show');
                
                // Auto-scroll to results
                setTimeout(() => {
                    document.getElementById('bankrollRecommendations').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
                
                document.getElementById('bankrollRecommendations').classList.remove('hidden');
                
                // Hide loading spinner
                document.getElementById('loadingSection').classList.remove('show');
                
                // Auto-scroll to results
                setTimeout(() => {
                    document.getElementById('bankrollRecommendations').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
                
                setTimeout(() => { isProcessing = false; }, 300);
            }, 1000);
        }
        
        function analyzeRolls() {
            if (isProcessing) return;
            isProcessing = true;
            
            console.log('Analyzing rolls...');
            const input = document.getElementById('historicalRolls').value;
            const rolls = input.split(',').map(r => parseInt(r.trim())).filter(r => r >= 2 && r <= 12 && r !== 7);
            
            if (rolls.length === 0) {
                document.getElementById('analysisResult').innerHTML = 
                    '<div class="error">‚ö†Ô∏è Please enter valid rolls (2-12, excluding 7)</div>';
                isProcessing = false;
                return;
            }
            
            const bankroll = parseFloat(document.getElementById('bankroll').value);
            const strategy = document.getElementById('strategy').value;
            const bets = calculateBets(bankroll, strategy);
            const usePressing = strategy === 'pressProfit';
            const pressPercent = usePressing ? parseFloat(document.getElementById('pressPercent').value) : 50;
            
            const currentBets = {};
            Object.keys(bets).forEach(k => currentBets[k] = bets[k]);
            
            let prob = 1;
            let totalProfit = 0;
            let rollDetails = [];
            
            rolls.forEach((r, index) => {
                prob *= strategyData[r].ways / 30;
                
                if (currentBets[r] > 0) {
                    const winAmount = calculateWin(r, currentBets[r]);
                    totalProfit += winAmount;
                    
                    rollDetails.push({
                        roll: r,
                        bet: currentBets[r],
                        win: winAmount
                    });
                    
                    if (usePressing && index < rolls.length - 1) {
                        const pressAmount = winAmount * (pressPercent / 100);
                        currentBets[r] += pressAmount;
                    }
                }
            });
            
            const odds = 1 / prob;
            
            // Calculate probability of rolling N non-7s in a row (any sequence)
            const numRolls = rolls.length;
            const probNoSeven = Math.pow(30/36, numRolls); // (5/6)^N
            const oddsNoSeven = 1 / probNoSeven;
            
            // Calculate American sports betting odds
            function toAmericanOdds(probability) {
                if (probability >= 0.5) {
                    // Favorite (negative odds)
                    return Math.round(-(probability / (1 - probability)) * 100);
                } else {
                    // Underdog (positive odds)
                    return Math.round(((1 - probability) / probability) * 100);
                }
            }
            
            // Calculate equivalent sports betting odds for the profit made
            function profitToAmericanOdds(profit, betSize) {
                const ratio = profit / betSize;
                if (ratio >= 1) {
                    // Positive odds: profit = (bet * odds) / 100
                    return Math.round(ratio * 100);
                } else {
                    // Negative odds: profit = (bet * 100) / |odds|
                    return Math.round(-(100 / ratio));
                }
            }
            
            // Use the bet size from the first number rolled as the reference bet
            const firstRollBetSize = bets[rolls[0]] || 0;
            const equivalentOdds = profitToAmericanOdds(totalProfit, firstRollBetSize);
            
            const americanOddsNoSeven = toAmericanOdds(probNoSeven);
            
            let rollDetailsHTML = '';
            if (usePressing && rollDetails.length > 0) {
                rollDetailsHTML = `
                    <div style="border-top: 1px solid #7e22ce; padding-top: 15px; margin-top: 15px;">
                        <div style="font-size: 12px; color: #e9d5ff; margin-bottom: 10px; font-weight: bold;">üìà PRESS PROFIT BREAKDOWN:</div>
                        <div style="font-size: 11px; color: #c4b5fd; line-height: 1.6;">
                            ${rollDetails.map((detail, i) => 
                                `Roll ${i+1} (${detail.roll}): $${detail.bet.toFixed(2)} bet ‚Üí $${detail.win.toFixed(2)} profit`
                            ).join('<br>')}
                        </div>
                        <div style="font-size: 12px; color: #fde68a; margin-top: 8px;">
                            Your bets grew from $${bets[rolls[0]].toFixed(2)} to $${currentBets[rolls[rolls.length-1]].toFixed(2)} through pressing!
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('analysisResult').innerHTML = `
                <div class="analysis-result">
                    <div class="analysis-grid">
                        <div>
                            <div style="font-size: 12px; color: #e9d5ff; margin-bottom: 5px;">Your Roll Sequence</div>
                            <div style="font-size: 18px; font-weight: bold;">${rolls.join(' ‚Üí ')}</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #e9d5ff; margin-bottom: 5px;">Total Profit</div>
                            <div style="font-size: 18px; font-weight: bold; color: #86efac;">$${totalProfit.toFixed(2)}</div>
                        </div>
                    </div>
                    ${rollDetailsHTML}
                    
                    <div style="border-top: 1px solid #7e22ce; padding-top: 15px; margin-top: 15px;">
                        <div style="font-size: 13px; color: #fde68a; margin-bottom: 12px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px;">üìä Probability Analysis</div>
                        
                        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.2) 100%); border: 1px solid #10b981; border-radius: 8px; padding: 12px; margin-bottom: 12px;">
                            <div style="font-size: 11px; color: #86efac; margin-bottom: 6px; font-weight: bold;">AVOIDING 7 FOR ${numRolls} ROLL${numRolls > 1 ? 'S' : ''}</div>
                            <div style="font-size: 10px; color: #d1fae5; margin-bottom: 8px; font-style: italic;">Rolling ANY ${numRolls} non-7 number${numRolls > 1 ? 's' : ''} in a row</div>
                            <div style="font-size: 22px; font-weight: bold; color: #fde68a;">${(probNoSeven * 100).toFixed(2)}%</div>
                            <div style="font-size: 15px; font-weight: 600; color: #e9d5ff;">1 in ${oddsNoSeven.toFixed(2)}</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.2) 100%); border: 1px solid #3b82f6; border-radius: 8px; padding: 12px;">
                            <div style="font-size: 11px; color: #93c5fd; margin-bottom: 6px; font-weight: bold;">EXACT SEQUENCE PROBABILITY</div>
                            <div style="font-size: 10px; color: #bfdbfe; margin-bottom: 8px; font-style: italic;">Rolling ${rolls.join(' ‚Üí ')} in that exact order</div>
                            <div style="font-size: 22px; font-weight: bold; color: #fde68a;">${(prob * 100).toFixed(2)}%</div>
                            <div style="font-size: 15px; font-weight: 600; color: #e9d5ff;">1 in ${odds.toFixed(0)}</div>
                        </div>
                    </div>
                    
                    <div class="fun-fact">
                        <div class="fun-fact-header">üí∞ AMERICAN SPORTS BETTING ODDS</div>
                        <div style="margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid rgba(167, 139, 250, 0.3);">
                            <p style="font-size: 13px; line-height: 1.5; margin-bottom: 8px;">
                                <strong style="color: #86efac;">Avoiding 7 for ${numRolls} Roll${numRolls > 1 ? 's' : ''}:</strong>
                            </p>
                            <div style="font-size: 28px; font-weight: bold; color: #fde68a;">
                                ${americanOddsNoSeven > 0 ? '+' : ''}${americanOddsNoSeven.toLocaleString()}
                            </div>
                            <p style="font-size: 11px; color: #e9d5ff; margin-top: 6px; font-style: italic;">
                                ${americanOddsNoSeven > 0 
                                    ? `Bet $100 to win $${americanOddsNoSeven.toLocaleString()}` 
                                    : `Bet $${Math.abs(americanOddsNoSeven).toLocaleString()} to win $100`}
                            </p>
                        </div>
                        <div>
                            <p style="font-size: 13px; line-height: 1.5; margin-bottom: 8px;">
                                <strong style="color: #93c5fd;">Equivalent Profit Odds:</strong>
                            </p>
                            <div style="font-size: 28px; font-weight: bold; color: #fde68a;">
                                ${equivalentOdds > 0 ? '+' : ''}${equivalentOdds.toLocaleString()}
                            </div>
                            <p style="font-size: 11px; color: #e9d5ff; margin-top: 6px; font-style: italic;">
                                To make $${totalProfit.toFixed(2)} profit on a $${firstRollBetSize.toFixed(2)} bet
                            </p>
                            <p style="font-size: 10px; color: #bfdbfe; margin-top: 4px;">
                                ${equivalentOdds > 0 
                                    ? `Same as betting $${firstRollBetSize.toFixed(2)} at ${equivalentOdds > 0 ? '+' : ''}${equivalentOdds}` 
                                    : `Same as betting $${firstRollBetSize.toFixed(2)} at ${equivalentOdds}`}
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            setTimeout(() => { isProcessing = false; }, 300);
        }

        function setupButton(buttonId, handler) {
            const button = document.getElementById(buttonId);
            if (!button) {
                console.error('Button not found:', buttonId);
                return;
            }
            
            let touchHandled = false;
            
            button.addEventListener('touchstart', function(e) {
                touchHandled = true;
            }, { passive: true });
            
            button.addEventListener('click', function(e) {
                if (touchHandled) {
                    touchHandled = false;
                    setTimeout(() => { touchHandled = false; }, 500);
                }
                handler();
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            
            const bankrollInput = document.getElementById('bankroll');
            const strategySelect = document.getElementById('strategy');
            const pressPct = document.getElementById('pressPercent');
            
            if (bankrollInput) {
                bankrollInput.addEventListener('change', updateBetDisplay);
                bankrollInput.addEventListener('input', updateBetDisplay);
            }
            
            if (strategySelect) {
                strategySelect.addEventListener('change', toggleCustomBets);
            }
            
            if (pressPct) {
                pressPct.addEventListener('change', updateBetDisplay);
                pressPct.addEventListener('input', updateBetDisplay);
            }
            
            const customInputs = [2,3,4,5,6,8,9,10,11,12];
            customInputs.forEach(num => {
                const input = document.getElementById('custom' + num);
                if (input) {
                    input.addEventListener('change', updateCustomTotal);
                    input.addEventListener('input', updateCustomTotal);
                }
            });
            
            setupButton('runSimBtn', runSimulation);
            setupButton('analyzeBtn', analyzeRolls);
            
            // Setup practice mode buttons
            setupButton('startPracticeBtn', startPracticeSession);
            setupButton('rollPracticeBtn', rollPracticeDice);
            setupButton('endPracticeBtn', endPracticeSession);
            
            // Setup mode toggle buttons
            setupButton('standardModeBtn', function() {
                if (currentMode !== 'standard') {
                    currentMode = 'standard';
                    document.getElementById('standardModeBtn').classList.add('active');
                    document.getElementById('reverseModeBtn').classList.remove('active');
                    document.getElementById('standardModeInputs').classList.remove('hidden');
                    document.getElementById('reverseModeInputs').classList.add('hidden');
                    document.getElementById('bankrollRecommendations').classList.add('hidden');
                    document.getElementById('optimalSection').innerHTML = '';
                    document.getElementById('resultsSection').innerHTML = '';
                    document.getElementById('modeDescription').textContent = 'Standard Mode: Enter your bankroll and target profit to find the optimal number of rolls.';
                    document.getElementById('sessionInstruction').textContent = 'Set your session bankroll, target profit goal, and choose a betting strategy. The strategy determines how your bankroll is distributed across the 10 numbers (2-12). Click \'Run Simulations\' to find the optimal number of rolls before cashing out.';
                }
            });
            
            setupButton('reverseModeBtn', function() {
                if (currentMode !== 'reverse') {
                    currentMode = 'reverse';
                    document.getElementById('reverseModeBtn').classList.add('active');
                    document.getElementById('standardModeBtn').classList.remove('active');
                    document.getElementById('standardModeInputs').classList.add('hidden');
                    document.getElementById('reverseModeInputs').classList.remove('hidden');
                    document.getElementById('optimalSection').innerHTML = '';
                    document.getElementById('resultsSection').innerHTML = '';
                    document.getElementById('bankrollRecommendations').classList.add('hidden');
                    document.getElementById('modeDescription').textContent = 'Reverse Calculator: Enter your target profit and discover what bankroll levels give you different success probabilities.';
                    document.getElementById('sessionInstruction').textContent = 'Set your target profit goal and choose a betting strategy. The calculator will determine what bankroll amounts you need for different probability levels of hitting your target.';
                }
            });
            
            // Setup info buttons
            setupButton('howToPlayBtn', () => toggleInfoSection('howToPlayBtn', 'howToPlayContent'));
            setupButton('howToUseBtn', () => toggleInfoSection('howToUseBtn', 'howToUseContent'));
            
            updateBetDisplay();
            startDiceRolling();
            
            console.log('Initialization complete');
        });
        
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                console.log('Page visible again, ensuring dice animation continues');
                lastDiceRoll = Date.now() - DICE_INTERVAL;
            }
        });

        let lastDiceRoll = 0;
        const DICE_INTERVAL = 2500;
        
        function rollDice() {
            const dice1 = document.getElementById('dice1');
            const dice2 = document.getElementById('dice2');
            
            if (!dice1 || !dice2) {
                setTimeout(rollDice, 100);
                return;
            }
            
            const roll1 = Math.floor(Math.random() * 6) + 1;
            const roll2 = Math.floor(Math.random() * 6) + 1;
            
            dice1.className = 'dice-icon dice-face-' + roll1;
            dice2.className = 'dice-icon dice-face-' + roll2;
            
            dice1.style.animation = 'none';
            dice2.style.animation = 'none';
            
            void dice1.offsetWidth;
            void dice2.offsetWidth;
            
            dice1.style.animation = 'rollDice 3s infinite ease-in-out';
            dice2.style.animation = 'rollDice 3s infinite ease-in-out';
            dice2.style.animationDelay = '-1.5s';
            
            lastDiceRoll = Date.now();
        }
        
        function startDiceRolling() {
            console.log('Starting dice animation with interval');
            rollDice();
            setInterval(rollDice, DICE_INTERVAL);
        }
    </script>
</body>
</html>
